{"remainingRequest":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\capstone\\DrowsinessFrontEnd\\src\\components\\vendor\\overview\\ExpiringRoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\capstone\\DrowsinessFrontEnd\\src\\components\\vendor\\overview\\ExpiringRoom.vue","mtime":1610216666080},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovY2Fwc3RvbmUvRHJvd3NpbmVzc0Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0V4cGlyaW5nUm9vbScsCiAgcHJvcHM6IFsnZ3JvdXBJZCddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBleHBpcmluZ0NvbnRyYWN0czogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoewogICAgZ2V0Q29udHJhY3RzOiAndXNlci9nZXRDb250cmFjdHMnCiAgfSkpLCB7fSwgewogICAgdXBkYXRlRXhwaXJpbmdSb29tTGlzdDogZnVuY3Rpb24gdXBkYXRlRXhwaXJpbmdSb29tTGlzdChncm91cElkKSB7CiAgICAgIGNvbnNvbGUubG9nKCd3YXRjaCBncm91cGlkIHJ1bicpOwogICAgICB2YXIgb25lTW9udGggPSAzMSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7CiAgICAgIHZhciBleHBpcmluZyA9IFtdOyAvLyBnZXQgYWxsIHRoZSBjb250cmFjdHMgd2hpY2ggaGFzIHZhbGlkIHRpbWUgbGVzcyB0aGFuIG9uZSBtb250aAoKICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgICAgIGV4cGlyaW5nID0gdGhpcy5jb250cmFjdHMuZmlsdGVyKGZ1bmN0aW9uIChjb250cmFjdCkgewogICAgICAgIHJldHVybiBjb250cmFjdC5ncm91cC5ncm91cElkID09PSBncm91cElkOwogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGNvbnRyYWN0KSB7CiAgICAgICAgdmFyIGRpZmYgPSBub3cgLSBjb250cmFjdC5zdGFydFRpbWU7CiAgICAgICAgcmV0dXJuIGRpZmYgPCA2ICogb25lTW9udGg7CiAgICAgIH0pOwogICAgICB0aGlzLmV4cGlyaW5nQ29udHJhY3RzID0gZXhwaXJpbmc7CiAgICB9LAogICAgZ2V0RXhwaXJpbmdEYXRlU3RyaW5nOiBmdW5jdGlvbiBnZXRFeHBpcmluZ0RhdGVTdHJpbmcoY29udHJhY3QpIHsKICAgICAgdmFyIHN0YXJ0VGltZSA9IGNvbnRyYWN0LnN0YXJ0VGltZSwKICAgICAgICAgIGR1cmF0aW9uID0gY29udHJhY3QuZHVyYXRpb247CiAgICAgIHZhciBkID0gdGhpcy5leHBpcmluZ0RhdGUoc3RhcnRUaW1lLCBkdXJhdGlvbik7CiAgICAgIHJldHVybiBkLnRvTG9jYWxlRGF0ZVN0cmluZygndmktdm4nKTsKICAgIH0sCiAgICBleHBpcmluZ0RhdGU6IGZ1bmN0aW9uIGV4cGlyaW5nRGF0ZShzdGFydFRpbWUsIGR1cmF0aW9uKSB7CiAgICAgIHZhciBvbmVNb250aCA9IDMxICogMjQgKiA2MCAqIDYwICogMTAwMDsKICAgICAgdmFyIGR1cmF0aW9uSW5NaWxpcyA9IGR1cmF0aW9uICogb25lTW9udGg7CiAgICAgIHJldHVybiBuZXcgRGF0ZShzdGFydFRpbWUgKyBkdXJhdGlvbkluTWlsaXMpOwogICAgfQogIH0pLAogIGNvbXB1dGVkOiB7CiAgICBjb250cmFjdHM6IGZ1bmN0aW9uIGNvbnRyYWN0cygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY29udHJhY3RzLmRhdGE7CiAgICB9LAogICAgaXNMb2FkaW5nQ29udHJhY3RzOiBmdW5jdGlvbiBpc0xvYWRpbmdDb250cmFjdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmNvbnRyYWN0cy5pc0xvYWRpbmc7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZ3JvdXBJZDogZnVuY3Rpb24gZ3JvdXBJZChuZXdHcm91cElkKSB7CiAgICAgIHRoaXMudXBkYXRlRXhwaXJpbmdSb29tTGlzdChuZXdHcm91cElkKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5jb250cmFjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMuZ2V0Q29udHJhY3RzKCk7CiAgICB9CgogICAgdGhpcy51cGRhdGVFeHBpcmluZ1Jvb21MaXN0KHRoaXMuZ3JvdXBJZCk7CiAgfQp9Ow=="},{"version":3,"sources":["ExpiringRoom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA,CAAA,SAAA,CAFA;AAGA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,iBAAA,EAAA;AADA,KAAA;AAAA,GAHA;AAMA,EAAA,OAAA,kCACA,UAAA,CAAA;AACA,IAAA,YAAA,EAAA;AADA,GAAA,CADA;AAIA,IAAA,sBAJA,kCAIA,OAJA,EAIA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,mBAAA;AACA,UAAA,QAAA,GAAA,KAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,IAAA;AACA,UAAA,QAAA,GAAA,EAAA,CAHA,CAIA;;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,GAAA,EAAA;AACA,MAAA,QAAA,GAAA,KAAA,SAAA,CACA,MADA,CACA,UAAA,QAAA;AAAA,eAAA,QAAA,CAAA,KAAA,CAAA,OAAA,KAAA,OAAA;AAAA,OADA,EAEA,MAFA,CAEA,UAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,GAAA,GAAA,QAAA,CAAA,SAAA;AACA,eAAA,IAAA,GAAA,IAAA,QAAA;AACA,OALA,CAAA;AAMA,WAAA,iBAAA,GAAA,QAAA;AACA,KAjBA;AAkBA,IAAA,qBAlBA,iCAkBA,QAlBA,EAkBA;AAAA,UACA,SADA,GACA,QADA,CACA,SADA;AAAA,UACA,QADA,GACA,QADA,CACA,QADA;AAEA,UAAA,CAAA,GAAA,KAAA,YAAA,CAAA,SAAA,EAAA,QAAA,CAAA;AACA,aAAA,CAAA,CAAA,kBAAA,CAAA,OAAA,CAAA;AACA,KAtBA;AAuBA,IAAA,YAvBA,wBAuBA,SAvBA,EAuBA,QAvBA,EAuBA;AACA,UAAA,QAAA,GAAA,KAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,IAAA;AACA,UAAA,eAAA,GAAA,QAAA,GAAA,QAAA;AACA,aAAA,IAAA,IAAA,CAAA,SAAA,GAAA,eAAA,CAAA;AACA;AA3BA,IANA;AAmCA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,SAAA;AACA;AANA,GAnCA;AA2CA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,UADA,EACA;AACA,WAAA,sBAAA,CAAA,UAAA;AACA;AAHA,GA3CA;AAgDA,EAAA,OAhDA,qBAgDA;AACA,QAAA,KAAA,SAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,WAAA,YAAA;AACA;;AACA,SAAA,sBAAA,CAAA,KAAA,OAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\n  <div v-if=\"!isLoadingContracts\" style=\"width: 100%;\" class=\"pa-1 d-flex flex-column\">\n    <v-virtual-scroll\n      :items=\"expiringContracts\"\n      :item-height=\"40\"\n      height=\"200\"\n      v-if=\"expiringContracts.length > 0\"\n    >\n      <template v-slot=\"{ item, index }\">\n        <v-list-item\n          :key=\"item.contractId\"\n          class=\"px-0 py-0 d-flex align-center overview\"\n          v-bind:style=\"index % 2 === 0 ? 'background-color: #f1f3fa;' : 'background-color: #fff;'\"\n        >\n          <v-row class=\"d-flex align-center ma-0\">\n            <v-col cols=\"5\" class=\"px-3 d-flex align-center\">\n              <span class=\"size-sub-3 font-nunito\">{{ item.room.roomName }}</span>\n            </v-col>\n            <v-col cols=\"4\" class=\"px-3 d-flex align-center\">\n              <span class=\"size-sub-3 font-nunito\">{{ item.renter.username }}</span>\n            </v-col>\n            <v-col cols=\"3\" class=\"px-3 d-flex align-center\">\n              <span class=\"size-sub-3 font-nunito\">{{ getExpiringDateString(item) }}</span>\n            </v-col>\n          </v-row>\n        </v-list-item>\n      </template>\n    </v-virtual-scroll>\n    <span\n      v-if=\"expiringContracts.length === 0\"\n      class=\"d-flex justify-center font-nunito text-primary size9rem\"\n    >\n      Không có hợp đồng sắp hết hạn\n    </span>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\n\nexport default {\n  name: 'ExpiringRoom',\n  props: ['groupId'],\n  data: () => ({\n    expiringContracts: [],\n  }),\n  methods: {\n    ...mapActions({\n      getContracts: 'user/getContracts',\n    }),\n    updateExpiringRoomList(groupId) {\n      console.log('watch groupid run');\n      const oneMonth = 31 * 24 * 60 * 60 * 1000;\n      let expiring = [];\n      // get all the contracts which has valid time less than one month\n      const now = Date.now();\n      expiring = this.contracts\n        .filter((contract) => contract.group.groupId === groupId)\n        .filter((contract) => {\n          const diff = now - contract.startTime;\n          return diff < 6 * oneMonth;\n        });\n      this.expiringContracts = expiring;\n    },\n    getExpiringDateString(contract) {\n      const { startTime, duration } = contract;\n      const d = this.expiringDate(startTime, duration);\n      return d.toLocaleDateString('vi-vn');\n    },\n    expiringDate(startTime, duration) {\n      const oneMonth = 31 * 24 * 60 * 60 * 1000;\n      const durationInMilis = duration * oneMonth;\n      return new Date(startTime + durationInMilis);\n    },\n  },\n  computed: {\n    contracts() {\n      return this.$store.state.user.contracts.data;\n    },\n    isLoadingContracts() {\n      return this.$store.state.user.contracts.isLoading;\n    },\n  },\n  watch: {\n    groupId(newGroupId) {\n      this.updateExpiringRoomList(newGroupId);\n    },\n  },\n  created() {\n    if (this.contracts.length === 0) {\n      this.getContracts();\n    }\n    this.updateExpiringRoomList(this.groupId);\n  },\n};\n</script>\n<style>\n.overview.v-list-item {\n  min-height: 40px;\n}\n</style>\n"],"sourceRoot":"src/components/vendor/overview"}]}