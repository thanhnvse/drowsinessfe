{"remainingRequest":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\capstone\\HostelFrontEnd-BV2\\src\\components\\mixins\\authentication.js","dependencies":[{"path":"D:\\capstone\\HostelFrontEnd-BV2\\src\\components\\mixins\\authentication.js","mtime":1610926189476},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovY2Fwc3RvbmUvSG9zdGVsRnJvbnRFbmQtQlYyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovY2Fwc3RvbmUvSG9zdGVsRnJvbnRFbmQtQlYyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnLi4vLi4vY29uZmlnL2ZpcmViYXNlJzsKaW1wb3J0IHB1c2hOb3RpTWl4aW5zIGZyb20gJy4vcHVzaE5vdGlmaWNhdGlvbic7CnZhciBhdXRoID0gZmlyZWJhc2UuYXV0aDsKdmFyIGF1dGhlbnRpY2F0aW9uTWl4aW5zID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbWl4aW5zOiBbcHVzaE5vdGlNaXhpbnNdLAogIGNvbXB1dGVkOiB7CiAgICB1c2VyRGF0YTogZnVuY3Rpb24gdXNlckRhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXIuZGF0YTsKICAgIH0sCiAgICBsb2dpblN1Y2Nlc3M6IGZ1bmN0aW9uIGxvZ2luU3VjY2VzcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlci5zdWNjZXNzOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGxvZ2luUmVxdWVzdDogJ3VzZXIvbG9naW4nCiAgfSkpLCB7fSwgewogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBhdXRoLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kY29va2llcy5yZW1vdmUoJ3JvbGUnKTsKCiAgICAgICAgX3RoaXMuJGNvb2tpZXMucmVtb3ZlKCd1c2VySWQnKTsKCiAgICAgICAgX3RoaXMuJGNvb2tpZXMucmVtb3ZlKCdqd3QnKTsKCiAgICAgICAgX3RoaXMuJGNvb2tpZXMucmVtb3ZlKCdmaXJlYmFzZUlkVG9rZW4nKTsKCiAgICAgICAgX3RoaXMuJGNvb2tpZXMucmVtb3ZlKCdtZXNzYWdpbmdUb2tlbicpOwoKICAgICAgICBfdGhpcy5jbGVhclVzZXJEYXRhKCk7CgogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRUb2tlbklkRnJvbUZpcmViYXNlOiBmdW5jdGlvbiBnZXRUb2tlbklkRnJvbUZpcmViYXNlKGp3dFRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGN1cnJlbnRVc2VyLCBpZFRva2VuLCByZWZyZXNoVG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBhdXRoLnNldFBlcnNpc3RlbmNlKGZpcmViYXNlLmF1dGhOYW1lc3BhY2UuQXV0aC5QZXJzaXN0ZW5jZS5MT0NBTCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF1dGguc2lnbkluV2l0aEN1c3RvbVRva2VuKGp3dFRva2VuKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpcmViYXNlIHVzZXIgZGF0YTonLCBjdXJyZW50VXNlcik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50VXNlci5nZXRJZFRva2VuKHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZFRva2VuID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkVG9rZW4pOwogICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuID0gY3VycmVudFVzZXIucmVmcmVzaFRva2VuOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICBpZFRva2VuOiBpZFRva2VuLAogICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpcmViYXNlIGxvZ2luIGVycm9yOiAnLCBfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFmdGVyTG9naW46IGZ1bmN0aW9uIGFmdGVyTG9naW4oa2VlcEN1cnJlbnRSb3V0ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczIkdXNlckRhdGEsIGp3dFRva2VuLCBpZFRva2VuLCByZWZyZXNoVG9rZW4sIHJvbGUsIGlkLCBfdGhpczIkJHJvdXRlJHBhcmFtcywgbmV4dFVybCwgcHJlVXJsOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIubG9naW5TdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMiR1c2VyRGF0YSA9IF90aGlzMi51c2VyRGF0YSwgand0VG9rZW4gPSBfdGhpczIkdXNlckRhdGEuand0VG9rZW4sIGlkVG9rZW4gPSBfdGhpczIkdXNlckRhdGEuaWRUb2tlbiwgcmVmcmVzaFRva2VuID0gX3RoaXMyJHVzZXJEYXRhLnJlZnJlc2hUb2tlbjsKCiAgICAgICAgICAgICAgICBfdGhpczIuJGNvb2tpZXMuc2V0KCdqd3QnLCBqd3RUb2tlbik7IC8vIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLmdldFRva2VuSWRGcm9tRmlyZWJhc2Uoand0VG9rZW4pOwoKCiAgICAgICAgICAgICAgICBfdGhpczIuJGNvb2tpZXMuc2V0KCdmaXJlYmFzZUlkVG9rZW4nLCBpZFRva2VuKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJGNvb2tpZXMuc2V0KCdmaXJlYmFzZVJlZnJlc2hUb2tlbicsIHJlZnJlc2hUb2tlbik7CgogICAgICAgICAgICAgICAgcm9sZSA9ICdhZG1pbic7CiAgICAgICAgICAgICAgICBpZCA9IF90aGlzMi51c2VyRGF0YS51c2VySWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfdGhpczIudXNlckRhdGEucm9sZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gX2NvbnRleHQyLnQwID09PSAnVkVORE9SJyA/IDEwIDogX2NvbnRleHQyLnQwID09PSAnUkVOVEVSJyA/IDEyIDogX2NvbnRleHQyLnQwID09PSAnQURNSU4nID8gMTQgOiBfY29udGV4dDIudDAgPT09ICdNQU5BR0VSJyA/IDE2IDogMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJvbGUgPSAndmVuZG9ycyc7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgiYnJlYWsiLCAxOSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByb2xlID0gJ3JlbnRlcnMnOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgMTkpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcm9sZSA9ICdhZG1pbic7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgiYnJlYWsiLCAxOSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICByb2xlID0gJ21hbmFnZXInOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgMTkpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgMTkpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX3RoaXMyLiRjb29raWVzLnNldCgncm9sZScsIHJvbGUpOwoKICAgICAgICAgICAgICAgIF90aGlzMi4kY29va2llcy5zZXQoJ3VzZXJJZCcsIGlkKTsKCiAgICAgICAgICAgICAgICBpZiAoa2VlcEN1cnJlbnRSb3V0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuJHJvdXRlLnBhcmFtcyk7CiAgICAgICAgICAgICAgICBfdGhpczIkJHJvdXRlJHBhcmFtcyA9IF90aGlzMi4kcm91dGUucGFyYW1zLCBuZXh0VXJsID0gX3RoaXMyJCRyb3V0ZSRwYXJhbXMubmV4dFVybCwgcHJlVXJsID0gX3RoaXMyJCRyb3V0ZSRwYXJhbXMucHJlVXJsOwoKICAgICAgICAgICAgICAgIGlmICghbmV4dFVybCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKG5leHRVcmwpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IHJvbGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MSA9PT0gJ3ZlbmRvcnMnID8gMzEgOiBfY29udGV4dDIudDEgPT09ICdyZW50ZXJzJyA/IDMzIDogX2NvbnRleHQyLnQxID09PSAnYWRtaW4nID8gMzUgOiBfY29udGV4dDIudDEgPT09ICdtYW5hZ2VyJyA/IDM3IDogMzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy92ZW5kb3InKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgiYnJlYWsiLCA0MCk7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHByZVVybCB8fCAnLycpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDQwKTsKCiAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy9hZG1pbicpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDQwKTsKCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy9tYW5hZ2VyJyk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgNDApOwoKICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnLycpOwoKICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgX3RoaXMyLmRvR2V0TWVzc2FnaW5nVG9rZW4oKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgICAgICBfdGhpczIubWVzc2FnZSA9ICdT4buRIMSRaeG7h24gdGhv4bqhaSBob+G6t2MgbeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmchJzsKCiAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihrZWVwQ3VycmVudFJvdXRlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMy5sb2dpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5sb2dpblJlcXVlc3QoewogICAgICAgICAgICAgICAgICBwaG9uZTogX3RoaXMzLnBob25lLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogX3RoaXMzLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgICBnZXRUb2tlbklkRnJvbUZpcmViYXNlOiBfdGhpczMuZ2V0VG9rZW5JZEZyb21GaXJlYmFzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuYWZ0ZXJMb2dpbihrZWVwQ3VycmVudFJvdXRlKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXMzLmxvZ2luZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9KQp9OwpleHBvcnQgZGVmYXVsdCBhdXRoZW50aWNhdGlvbk1peGluczs="},{"version":3,"sources":["D:/capstone/HostelFrontEnd-BV2/src/components/mixins/authentication.js"],"names":["mapActions","firebase","pushNotiMixins","auth","authenticationMixins","data","loging","mixins","computed","userData","$store","state","user","loginSuccess","success","methods","loginRequest","logout","signOut","then","$cookies","remove","clearUserData","$router","push","catch","error","console","log","getTokenIdFromFirebase","jwtToken","setPersistence","authNamespace","Auth","Persistence","LOCAL","signInWithCustomToken","currentUser","getIdToken","idToken","refreshToken","afterLogin","keepCurrentRoute","set","role","id","userId","$route","params","nextUrl","preUrl","doGetMessagingToken","message","login","phone","password"],"mappings":"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","sourcesContent":["import { mapActions } from 'vuex';\nimport firebase from '../../config/firebase';\nimport pushNotiMixins from './pushNotification';\n\nconst { auth } = firebase;\n\nconst authenticationMixins = {\n  data: () => ({\n    loging: false,\n  }),\n  mixins: [pushNotiMixins],\n  computed: {\n    userData() {\n      return this.$store.state.user.user.data;\n    },\n    loginSuccess() {\n      return this.$store.state.user.user.success;\n    },\n  },\n  methods: {\n    ...mapActions({\n      loginRequest: 'user/login',\n    }),\n    logout() {\n      auth\n        .signOut()\n        .then(() => {\n          this.$cookies.remove('role');\n          this.$cookies.remove('userId');\n          this.$cookies.remove('jwt');\n          this.$cookies.remove('firebaseIdToken');\n          this.$cookies.remove('messagingToken');\n          this.clearUserData();\n          this.$router.push('/');\n        })\n        .catch((error) => console.log(error));\n    },\n    async getTokenIdFromFirebase(jwtToken) {\n      try {\n        await auth.setPersistence(firebase.authNamespace.Auth.Persistence.LOCAL);\n        await auth.signInWithCustomToken(jwtToken);\n        const { currentUser } = auth;\n        console.log('firebase user data:', currentUser);\n        const idToken = await currentUser.getIdToken(true);\n        console.log(idToken);\n        const { refreshToken } = currentUser;\n        return { idToken, refreshToken };\n      } catch (error) {\n        console.log('firebase login error: ', error);\n      }\n      return null;\n    },\n    async afterLogin(keepCurrentRoute) {\n      if (this.loginSuccess) {\n        const { jwtToken, idToken, refreshToken } = this.userData;\n        this.$cookies.set('jwt', jwtToken);\n        // const idToken = await this.getTokenIdFromFirebase(jwtToken);\n        this.$cookies.set('firebaseIdToken', idToken);\n        this.$cookies.set('firebaseRefreshToken', refreshToken);\n        let role = 'admin';\n        const id = this.userData.userId;\n        switch (this.userData.role) {\n          case 'VENDOR':\n            role = 'vendors';\n            break;\n          case 'RENTER':\n            role = 'renters';\n            break;\n          case 'ADMIN':\n            role = 'admin';\n            break;\n          case 'MANAGER':\n            role = 'manager';\n            break;\n          default:\n            break;\n        }\n        this.$cookies.set('role', role);\n        this.$cookies.set('userId', id);\n        if (!keepCurrentRoute) {\n          console.log(this.$route.params);\n          const { nextUrl, preUrl } = this.$route.params;\n          if (nextUrl) {\n            this.$router.push(nextUrl);\n          } else {\n            switch (role) {\n              case 'vendors':\n                this.$router.push('/vendor');\n                break;\n              case 'renters':\n                this.$router.push(preUrl || '/');\n                break;\n              case 'admin':\n                this.$router.push('/admin');\n                break;\n              case 'manager':\n                this.$router.push('/manager');\n                break;\n              default:\n                this.$router.push('/');\n            }\n          }\n        }\n        this.doGetMessagingToken();\n      } else {\n        this.message = 'Số điện thoại hoặc mật khẩu không đúng!';\n      }\n    },\n    async login(keepCurrentRoute) {\n      this.loging = true;\n      await this.loginRequest({\n        phone: this.phone,\n        password: this.password,\n        getTokenIdFromFirebase: this.getTokenIdFromFirebase,\n      });\n      await this.afterLogin(keepCurrentRoute);\n      this.loging = false;\n    },\n  },\n};\n\nexport default authenticationMixins;\n"]}]}