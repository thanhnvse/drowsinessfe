{"remainingRequest":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\thread-loader\\dist\\cjs.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\capstone\\DrowsinessFrontEnd\\src\\plugins\\axios.js","dependencies":[{"path":"D:\\capstone\\DrowsinessFrontEnd\\src\\plugins\\axios.js","mtime":1625390927902},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9jYXBzdG9uZS9Ecm93c2luZXNzRnJvbnRFbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9jYXBzdG9uZS9Ecm93c2luZXNzRnJvbnRFbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy91dGlscyc7CmltcG9ydCBjb25zdGFudCBmcm9tICcuLi9jb25maWcvY29uc3RhbnQnOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMIHx8IGNvbnN0YW50LlZVRV9BUFBfQVBJX1VSTDsKYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0FjY2VwdC1MYW5ndWFnZSddID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxlJykpIHx8ICdlbic7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShjb25maWcpIHsKICAgIHZhciBteUNvbmZpZywgdXJsc0V4Y2x1ZGVkRm9yQmVhcmVySGVhZGVyOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBteUNvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZyk7IC8vIERvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgICAgICAgICAgIC8vIElmIHJlcXVlc3QgaXMgZGlmZmVyZW50IHRoYW4gYW55IG9mIHRoZSBVUkxTIGluIHVybHNFeGNsdWRlZEZvckJlYXJlckhlYWRlcgogICAgICAgICAgICAvLyB0aGVuIHNlbmQgQXV0aG9yaXphdGlvbiBoZWFkZXIgd2l0aCB0b2tlbiBmcm9tIGxvY2Fsc3RvcmFnZQoKICAgICAgICAgICAgdXJsc0V4Y2x1ZGVkRm9yQmVhcmVySGVhZGVyID0gWycvbG9naW4nLCAnL3JlZ2lzdGVyJywgJy90eXBlcycsICcvc2Nob29scycsICcvc3RhdGlzdGljJywgJy9mYWNpbGl0aWVzJywgJy91Y2F0ZWdvcmllcycsICcvc2VydmljZXMnLCAnL3Byb3ZpbmNlcycsICcvdXRpbGl0aWVzJywgJy9jYXRlZ29yaWVzJywgJy9yZWd1bGF0aW9ucycsICcvZ3JvdXAnLCAnL2ZlZWRiYWNrcycsICcvc2NoZWR1bGVzJ107CgogICAgICAgICAgICBpZiAodXJsc0V4Y2x1ZGVkRm9yQmVhcmVySGVhZGVyLmV2ZXJ5KGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICByZXR1cm4gIW15Q29uZmlnLnVybC5pbmNsdWRlcyh1cmwpOwogICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgIG15Q29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICJCZWFyZXIgIi5jb25jYXQod2luZG93LiRjb29raWVzLmdldCgnZmlyZWJhc2VJZFRva2VuJykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBteUNvbmZpZyk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCksIGZ1bmN0aW9uIChlcnJvcikgewogIC8vIERvIHNvbWV0aGluZyB3aXRoIHJlcXVlc3QgZXJyb3IKICBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvcgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXNwb25zZSBkYXRhCiAgLy8gQ2hlY2tzIGlmIGFwcCBpcyBiZWluZyB1c2VkIGluIG1vYmlsZQogIGlmIChyZXNwb25zZS5jb25maWcudXJsICE9PSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMLCAiL3Rva2VuIikgJiYgcmVzcG9uc2UuY29uZmlnLnVybCAhPT0gIiIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sICIvdmVyc2lvbi5qc29uIikpIHsvLyBjaGVja0ZvclVwZGF0ZXMoKTsKICAgIC8vIHV0aWxzLmNoZWNrSWZUb2tlbk5lZWRzUmVmcmVzaCgpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBSZXR1cm4gYW55IGVycm9yIHdoaWNoIGlzIG5vdCBkdWUgdG8gYXV0aGVudGljYXRpb24gYmFjayB0byB0aGUgY2FsbGluZyBzZXJ2aWNlCiAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyAhPT0gNDAxKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICByZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfSAvLyBUcnkgcmVxdWVzdCBhZ2FpbiB3aXRoIG5ldyB0b2tlbgoKCiAgcmV0dXJuIHV0aWxzLnVwZGF0ZVRva2VuKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAvLyBOZXcgcmVxdWVzdCB3aXRoIG5ldyB0b2tlbgogICAgdmFyIGNvbmZpZyA9IGVycm9yLmNvbmZpZzsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KHdpbmRvdy4kY29va2llcy5nZXQoJ3Rva2VuJykpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MucmVxdWVzdChjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9KTsKICAgIH0pOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICBQcm9taXNlLnJlamVjdChlKTsKICB9KTsKfSk7CnZhciBQbHVnaW4gPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWVPYmplY3QpIHsKICAgIC8vIGNvbnN0IG15VnVlID0geyAuLi5WdWUgfTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgVnVlT2JqZWN0LmF4aW9zID0gYXhpb3M7CiAgICB3aW5kb3cuYXhpb3MgPSBheGlvczsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZU9iamVjdC5wcm90b3R5cGUsIHsKICAgICAgYXhpb3M6IHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiBheGlvczsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICRheGlvczogewogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIGF4aW9zOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQp9OwpWdWUudXNlKFBsdWdpbik7CmV4cG9ydCBkZWZhdWx0IFBsdWdpbjs="},{"version":3,"sources":["D:/capstone/DrowsinessFrontEnd/src/plugins/axios.js"],"names":["Vue","axios","utils","constant","defaults","baseURL","process","env","VUE_APP_API_URL","headers","common","JSON","parse","localStorage","getItem","interceptors","request","use","config","myConfig","urlsExcludedForBearerHeader","every","url","includes","Authorization","window","$cookies","get","error","Promise","reject","response","location","origin","status","resolve","updateToken","then","catch","e","Plugin","install","VueObject","Object","defineProperties","prototype","$axios"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport axios from 'axios';\nimport utils from '../utils/utils';\nimport constant from '../config/constant';\n\naxios.defaults.baseURL = process.env.VUE_APP_API_URL || constant.VUE_APP_API_URL;\naxios.defaults.headers.common['Accept-Language'] =\n  JSON.parse(localStorage.getItem('locale')) || 'en';\n\naxios.interceptors.request.use(\n  async (config) => {\n    const myConfig = { ...config };\n    // Do something before request is sent\n    // If request is different than any of the URLS in urlsExcludedForBearerHeader\n    // then send Authorization header with token from localstorage\n    const urlsExcludedForBearerHeader = [\n      '/login',\n      '/register',\n      '/types',\n      '/schools',\n      '/statistic',\n      '/facilities',\n      '/ucategories',\n      '/services',\n      '/provinces',\n      '/utilities',\n      '/categories',\n      '/regulations',\n      '/group',\n      '/feedbacks',\n      '/schedules',\n    ];\n    if (urlsExcludedForBearerHeader.every((url) => !myConfig.url.includes(url))) {\n      myConfig.headers.Authorization = `Bearer ${window.$cookies.get('firebaseIdToken')}`;\n    }\n    return myConfig;\n  },\n  (error) => {\n    // Do something with request error\n    Promise.reject(error);\n  },\n);\n\n// Add a response interceptor\naxios.interceptors.response.use(\n  (response) => {\n    // Do something with response data\n    // Checks if app is being used in mobile\n    if (\n      response.config.url !== `${process.env.VUE_APP_API_URL}/token` &&\n      response.config.url !== `${window.location.origin}/version.json`\n    ) {\n      // checkForUpdates();\n      // utils.checkIfTokenNeedsRefresh();\n    }\n    return response;\n  },\n  (error) => {\n    // Return any error which is not due to authentication back to the calling service\n    if (error.response.status !== 401) {\n      return new Promise((resolve, reject) => {\n        reject(error);\n      });\n    }\n    // Try request again with new token\n    return utils\n      .updateToken()\n      .then(() => {\n        // New request with new token\n        const { config } = error;\n        config.headers.Authorization = `Bearer ${window.$cookies.get('token')}`;\n\n        return new Promise((resolve, reject) => {\n          axios\n            .request(config)\n            .then((response) => {\n              resolve(response);\n            })\n            .catch((e) => {\n              reject(e);\n            });\n        });\n      })\n      .catch((e) => {\n        Promise.reject(e);\n      });\n  },\n);\n\nconst Plugin = {\n  install: (VueObject) => {\n    // const myVue = { ...Vue };\n    // eslint-disable-next-line no-param-reassign\n    VueObject.axios = axios;\n    window.axios = axios;\n    Object.defineProperties(VueObject.prototype, {\n      axios: {\n        get() {\n          return axios;\n        },\n      },\n      $axios: {\n        get() {\n          return axios;\n        },\n      },\n    });\n  },\n};\n\nVue.use(Plugin);\n\nexport default Plugin;\n"]}]}