{"remainingRequest":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\thread-loader\\dist\\cjs.js!D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\capstone\\HostelFrontEnd-BV2\\src\\utils\\firebaseNotification.js","dependencies":[{"path":"D:\\capstone\\HostelFrontEnd-BV2\\src\\utils\\firebaseNotification.js","mtime":1610216666518},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\HostelFrontEnd-BV2\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovY2Fwc3RvbmUvSG9zdGVsRnJvbnRFbmQtQlYyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCmZ1bmN0aW9uIGdldERhdGVUaW1lU3RyaW5nKG1pbGlzZWNvbmQpIHsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG1pbGlzZWNvbmQpOwogIHZhciBkID0gZGF0ZS5nZXREYXRlKCk7CiAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTsKICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgcmV0dXJuICIiLmNvbmNhdChkLCAiLyIpLmNvbmNhdChtb250aCwgIi8iKS5jb25jYXQoeWVhciwgIiAiKS5jb25jYXQoaG91ciwgIjoiKS5jb25jYXQobWludXRlKTsKfQoKZnVuY3Rpb24gc2VuZEJvb2tpbmdOb3RpZmljYXRpb24oX3gpIHsKICByZXR1cm4gX3NlbmRCb29raW5nTm90aWZpY2F0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9zZW5kQm9va2luZ05vdGlmaWNhdGlvbigpIHsKICBfc2VuZEJvb2tpbmdOb3RpZmljYXRpb24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYm9va2luZykgewogICAgdmFyIHZlbmRvciwgY29udGVudCwgcmVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB2ZW5kb3IgPSBib29raW5nLnZlbmRvci5maXJlYmFzZVRva2VuOwogICAgICAgICAgICBjb250ZW50ID0gewogICAgICAgICAgICAgIHRvOiB2ZW5kb3IuZmlyZWJhc2VUb2tlbiwKICAgICAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLAogICAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogewogICAgICAgICAgICAgICAgdGl0bGU6ICdC4bqhbiBjw7MgbeG7mXQgYm9va2luZyBt4bubaSEnLAogICAgICAgICAgICAgICAgYm9keTogZ2V0RGF0ZVRpbWVTdHJpbmcoYm9va2luZy5tZWV0VGltZSksCiAgICAgICAgICAgICAgICAvLyBjbGlja19hY3Rpb246ICJodHRwczovL2dvb2dsZS5jb20iLAogICAgICAgICAgICAgICAgaWNvbjogYm9va2luZy5yZW50ZXIuYXZhdGFyCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBib29raW5nSWQ6IGJvb2tpbmcuYm9va2luZ0lkLAogICAgICAgICAgICAgICAgcmVudGVyTmFtZTogYm9va2luZy5yZW50ZXIudXNlcm5hbWUsCiAgICAgICAgICAgICAgICB0aW1lOiBib29raW5nLm1lZXRUaW1lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5heGlvcy5wb3N0KCcvYXBpL3YxL25vdGlmaWNhdGlvbi90b2tlbicsIGNvbnRlbnQpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzLnN0YXR1cyA9PT0gMjAwKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfc2VuZEJvb2tpbmdOb3RpZmljYXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIHNlbmRCb29raW5nTm90aWZpY2F0aW9uOiBzZW5kQm9va2luZ05vdGlmaWNhdGlvbgp9Ow=="},{"version":3,"sources":["D:/capstone/HostelFrontEnd-BV2/src/utils/firebaseNotification.js"],"names":["getDateTimeString","milisecond","date","Date","d","getDate","month","getMonth","year","getFullYear","hour","getHours","minute","getMinutes","sendBookingNotification","booking","vendor","firebaseToken","content","to","priority","notification","title","body","meetTime","icon","renter","avatar","data","bookingId","renterName","username","time","window","axios","post","res","status"],"mappings":";;;;AAAA,SAASA,iBAAT,CAA2BC,UAA3B,EAAuC;AACrC,MAAMC,IAAI,GAAG,IAAIC,IAAJ,CAASF,UAAT,CAAb;AACA,MAAMG,CAAC,GAAGF,IAAI,CAACG,OAAL,EAAV;AACA,MAAMC,KAAK,GAAGJ,IAAI,CAACK,QAAL,KAAkB,CAAhC;AACA,MAAMC,IAAI,GAAGN,IAAI,CAACO,WAAL,EAAb;AACA,MAAMC,IAAI,GAAGR,IAAI,CAACS,QAAL,EAAb;AACA,MAAMC,MAAM,GAAGV,IAAI,CAACW,UAAL,EAAf;AACA,mBAAUT,CAAV,cAAeE,KAAf,cAAwBE,IAAxB,cAAgCE,IAAhC,cAAwCE,MAAxC;AACD;;SACcE,uB;;;;;qFAAf,iBAAuCC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,MADR,GACiBD,OAAO,CAACC,MAAR,CAAeC,aADhC;AAEQC,YAAAA,OAFR,GAEkB;AACdC,cAAAA,EAAE,EAAEH,MAAM,CAACC,aADG;AAEdG,cAAAA,QAAQ,EAAE,MAFI;AAGdC,cAAAA,YAAY,EAAE;AACZC,gBAAAA,KAAK,EAAE,yBADK;AAEZC,gBAAAA,IAAI,EAAEvB,iBAAiB,CAACe,OAAO,CAACS,QAAT,CAFX;AAGZ;AACAC,gBAAAA,IAAI,EAAEV,OAAO,CAACW,MAAR,CAAeC;AAJT,eAHA;AASdC,cAAAA,IAAI,EAAE;AACJC,gBAAAA,SAAS,EAAEd,OAAO,CAACc,SADf;AAEJC,gBAAAA,UAAU,EAAEf,OAAO,CAACW,MAAR,CAAeK,QAFvB;AAGJC,gBAAAA,IAAI,EAAEjB,OAAO,CAACS;AAHV;AATQ,aAFlB;AAAA;AAAA,mBAkBoBS,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB,4BAAlB,EAAgDjB,OAAhD,CAlBpB;;AAAA;AAkBQkB,YAAAA,GAlBR;AAAA,6CAmBSA,GAAG,CAACC,MAAJ,KAAe,GAnBxB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAsBA,eAAe;AACbvB,EAAAA,uBAAuB,EAAvBA;AADa,CAAf","sourcesContent":["function getDateTimeString(milisecond) {\n  const date = new Date(milisecond);\n  const d = date.getDate();\n  const month = date.getMonth() + 1;\n  const year = date.getFullYear();\n  const hour = date.getHours();\n  const minute = date.getMinutes();\n  return `${d}/${month}/${year} ${hour}:${minute}`;\n}\nasync function sendBookingNotification(booking) {\n  const vendor = booking.vendor.firebaseToken;\n  const content = {\n    to: vendor.firebaseToken,\n    priority: 'high',\n    notification: {\n      title: 'Bạn có một booking mới!',\n      body: getDateTimeString(booking.meetTime),\n      // click_action: \"https://google.com\",\n      icon: booking.renter.avatar,\n    },\n    data: {\n      bookingId: booking.bookingId,\n      renterName: booking.renter.username,\n      time: booking.meetTime,\n    },\n  };\n\n  const res = await window.axios.post('/api/v1/notification/token', content);\n  return res.status === 200;\n}\n\nexport default {\n  sendBookingNotification,\n};\n"]}]}