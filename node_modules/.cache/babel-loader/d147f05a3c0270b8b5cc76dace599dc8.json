{"remainingRequest":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\capstone\\DrowsinessFrontEnd\\src\\components\\mixins\\processFCMForeground.js","dependencies":[{"path":"D:\\capstone\\DrowsinessFrontEnd\\src\\components\\mixins\\processFCMForeground.js","mtime":1625294394091},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovY2Fwc3RvbmUvRHJvd3NpbmVzc0Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnLi4vLi4vY29uZmlnL2ZpcmViYXNlJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi4vLi4vY29uZmlnL3B1c2hOb3RpZmljYXRpb25BY3Rpb25zJzsKdmFyIG1lc3NhZ2luZyA9IGZpcmViYXNlLm1lc3NhZ2luZzsKdmFyIHByb2Nlc3NGQ01Gb3JlZ3JvdW5kTWl4aW5zID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdNZXNzYWdlOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGdldE5ld0NvbW1pbmdCb29raW5nOiAndXNlci9nZXRPbmVCb29raW5nJywKICAgIHVwZGF0ZUJvb2tpbmdTdGF0dXNMb2NhbDogJ3VzZXIvdXBkYXRlQm9va2luZ1N0YXR1c0xvY2FsJywKICAgIHVwZGF0ZUNvbnRyYWN0TG9jYWw6ICd1c2VyL3VwZGF0ZUNvbnRyYWN0TG9jYWwnLAogICAgYWRkTm90aWZpY2F0aW9uTG9jYWw6ICd1c2VyL2FkZE5vdGlmaWNhdGlvbkxvY2FsJywKICAgIGdldE9uZUNvbnRyYWN0OiAndXNlci9nZXRPbmVDb250cmFjdCcKICB9KSksIHt9LCB7CiAgICByZWdpc3Rlck1lc3NhZ2luZzogZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmcoKSB7CiAgICAgIGlmIChtZXNzYWdpbmcpIHsKICAgICAgICBtZXNzYWdpbmcub25NZXNzYWdlKHRoaXMucmVjZWl2ZU5ld01lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgcmVjZWl2ZU5ld01lc3NhZ2U6IGZ1bmN0aW9uIHJlY2VpdmVOZXdNZXNzYWdlKHBheWxvYWQpIHsKICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgIHRoaXMubmV3TWVzc2FnZSA9IHBheWxvYWQ7CiAgICAgIHRoaXMuYWRkTm90aWZpY2F0aW9uTG9jYWwocGF5bG9hZCk7CgogICAgICBzd2l0Y2ggKHRoaXMubmV3TWVzc2FnZS5kYXRhLmFjdGlvbikgewogICAgICAgIGNhc2UgYWN0aW9ucy5ORVdfQk9PS0lORzoKICAgICAgICAgIHRoaXMuZ2V0TmV3Q29tbWluZ0Jvb2tpbmcoTnVtYmVyKHRoaXMubmV3TWVzc2FnZS5kYXRhLmlkKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBhY3Rpb25zLlNDQU5fQk9PS0lORzoKICAgICAgICAgIC8vIHZlbmRvciBzaWRlCiAgICAgICAgICB0aGlzLnVwZGF0ZUJvb2tpbmdTdGF0dXNMb2NhbChOdW1iZXIodGhpcy5uZXdNZXNzYWdlLmRhdGEuaWQpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIGFjdGlvbnMuU0NBTl9DT05UUkFDVDoKICAgICAgICAgIC8vIHZlbmRvciBzaWRlCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyYWN0TG9jYWwoTnVtYmVyKHRoaXMubmV3TWVzc2FnZS5kYXRhLmlkKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBhY3Rpb25zLk5FV19NRVNTQUdFOgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgYWN0aW9ucy5ORVdfQ09OVFJBQ1Q6CiAgICAgICAgY2FzZSBhY3Rpb25zLlVQREFURV9DT05UUkFDVDoKICAgICAgICBjYXNlIGFjdGlvbnMuQ09OVFJBQ1RfQUNDRVBURUQ6CiAgICAgICAgY2FzZSBhY3Rpb25zLlJFU0VSVkVfRkVFX1BBSUQ6CiAgICAgICAgY2FzZSBhY3Rpb25zLlJFU0VSVkVfRkVFX1JFQ0VJVkVEOgogICAgICAgIGNhc2UgYWN0aW9ucy5SRVNUX0ZFRV9QQUlEOgogICAgICAgIGNhc2UgYWN0aW9ucy5BTExfRkVFX1BBSUQ6CiAgICAgICAgY2FzZSBhY3Rpb25zLkFMTF9GRUVfUkVDRUlWRUQ6CiAgICAgICAgY2FzZSBhY3Rpb25zLlJFU1RfRkVFX1JFQ0VJVkVEOgogICAgICAgICAgdGhpcy5nZXRPbmVDb250cmFjdChOdW1iZXIodGhpcy5uZXdNZXNzYWdlLmRhdGEuaWQpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY29uc29sZS5sb2coJ2RlZmF1bHQgY2FzZSBvbiByZWNlaXZlIG5ldyBub3RpZmljYXRpb24nKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9Cn07CmV4cG9ydCBkZWZhdWx0IHByb2Nlc3NGQ01Gb3JlZ3JvdW5kTWl4aW5zOw=="},{"version":3,"sources":["D:/capstone/DrowsinessFrontEnd/src/components/mixins/processFCMForeground.js"],"names":["mapActions","firebase","actions","messaging","processFCMForegroundMixins","data","newMessage","methods","getNewCommingBooking","updateBookingStatusLocal","updateContractLocal","addNotificationLocal","getOneContract","registerMessaging","onMessage","receiveNewMessage","payload","console","log","action","NEW_BOOKING","Number","id","SCAN_BOOKING","SCAN_CONTRACT","NEW_MESSAGE","NEW_CONTRACT","UPDATE_CONTRACT","CONTRACT_ACCEPTED","RESERVE_FEE_PAID","RESERVE_FEE_RECEIVED","REST_FEE_PAID","ALL_FEE_PAID","ALL_FEE_RECEIVED","REST_FEE_RECEIVED","created"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,MAA3B;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,OAAP,MAAoB,sCAApB;IAEQC,S,GAAcF,Q,CAAdE,S;AAER,IAAMC,0BAA0B,GAAG;AACjCC,EAAAA,IAAI,EAAE;AAAA,WAAO;AACXC,MAAAA,UAAU,EAAE;AADD,KAAP;AAAA,GAD2B;AAIjCC,EAAAA,OAAO,kCACFP,UAAU,CAAC;AACZQ,IAAAA,oBAAoB,EAAE,oBADV;AAEZC,IAAAA,wBAAwB,EAAE,+BAFd;AAGZC,IAAAA,mBAAmB,EAAE,0BAHT;AAIZC,IAAAA,oBAAoB,EAAE,2BAJV;AAKZC,IAAAA,cAAc,EAAE;AALJ,GAAD,CADR;AAQLC,IAAAA,iBARK,+BAQe;AAClB,UAAIV,SAAJ,EAAe;AACbA,QAAAA,SAAS,CAACW,SAAV,CAAoB,KAAKC,iBAAzB;AACD;AACF,KAZI;AAaLA,IAAAA,iBAbK,6BAaaC,OAbb,EAasB;AACzBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,WAAKV,UAAL,GAAkBU,OAAlB;AACA,WAAKL,oBAAL,CAA0BK,OAA1B;;AACA,cAAQ,KAAKV,UAAL,CAAgBD,IAAhB,CAAqBc,MAA7B;AACE,aAAKjB,OAAO,CAACkB,WAAb;AACE,eAAKZ,oBAAL,CAA0Ba,MAAM,CAAC,KAAKf,UAAL,CAAgBD,IAAhB,CAAqBiB,EAAtB,CAAhC;AACA;;AACF,aAAKpB,OAAO,CAACqB,YAAb;AAA2B;AACzB,eAAKd,wBAAL,CAA8BY,MAAM,CAAC,KAAKf,UAAL,CAAgBD,IAAhB,CAAqBiB,EAAtB,CAApC;AACA;;AACF,aAAKpB,OAAO,CAACsB,aAAb;AAA4B;AAC1B,eAAKd,mBAAL,CAAyBW,MAAM,CAAC,KAAKf,UAAL,CAAgBD,IAAhB,CAAqBiB,EAAtB,CAA/B;AACA;;AACF,aAAKpB,OAAO,CAACuB,WAAb;AACE;;AACF,aAAKvB,OAAO,CAACwB,YAAb;AACA,aAAKxB,OAAO,CAACyB,eAAb;AACA,aAAKzB,OAAO,CAAC0B,iBAAb;AACA,aAAK1B,OAAO,CAAC2B,gBAAb;AACA,aAAK3B,OAAO,CAAC4B,oBAAb;AACA,aAAK5B,OAAO,CAAC6B,aAAb;AACA,aAAK7B,OAAO,CAAC8B,YAAb;AACA,aAAK9B,OAAO,CAAC+B,gBAAb;AACA,aAAK/B,OAAO,CAACgC,iBAAb;AACE,eAAKtB,cAAL,CAAoBS,MAAM,CAAC,KAAKf,UAAL,CAAgBD,IAAhB,CAAqBiB,EAAtB,CAA1B;AACA;;AACF;AACEL,UAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACA;AAzBJ;AA2BD;AA5CI,IAJ0B;AAkDjCiB,EAAAA,OAlDiC,qBAkDvB,CAAE;AAlDqB,CAAnC;AAqDA,eAAe/B,0BAAf","sourcesContent":["import { mapActions } from 'vuex';\nimport firebase from '../../config/firebase';\nimport actions from '../../config/pushNotificationActions';\n\nconst { messaging } = firebase;\n\nconst processFCMForegroundMixins = {\n  data: () => ({\n    newMessage: null,\n  }),\n  methods: {\n    ...mapActions({\n      getNewCommingBooking: 'user/getOneBooking',\n      updateBookingStatusLocal: 'user/updateBookingStatusLocal',\n      updateContractLocal: 'user/updateContractLocal',\n      addNotificationLocal: 'user/addNotificationLocal',\n      getOneContract: 'user/getOneContract',\n    }),\n    registerMessaging() {\n      if (messaging) {\n        messaging.onMessage(this.receiveNewMessage);\n      }\n    },\n    receiveNewMessage(payload) {\n      console.log(payload);\n      this.newMessage = payload;\n      this.addNotificationLocal(payload);\n      switch (this.newMessage.data.action) {\n        case actions.NEW_BOOKING:\n          this.getNewCommingBooking(Number(this.newMessage.data.id));\n          break;\n        case actions.SCAN_BOOKING: // vendor side\n          this.updateBookingStatusLocal(Number(this.newMessage.data.id));\n          break;\n        case actions.SCAN_CONTRACT: // vendor side\n          this.updateContractLocal(Number(this.newMessage.data.id));\n          break;\n        case actions.NEW_MESSAGE:\n          break;\n        case actions.NEW_CONTRACT:\n        case actions.UPDATE_CONTRACT:\n        case actions.CONTRACT_ACCEPTED:\n        case actions.RESERVE_FEE_PAID:\n        case actions.RESERVE_FEE_RECEIVED:\n        case actions.REST_FEE_PAID:\n        case actions.ALL_FEE_PAID:\n        case actions.ALL_FEE_RECEIVED:\n        case actions.REST_FEE_RECEIVED:\n          this.getOneContract(Number(this.newMessage.data.id));\n          break;\n        default:\n          console.log('default case on receive new notification');\n          break;\n      }\n    },\n  },\n  created() {},\n};\n\nexport default processFCMForegroundMixins;\n"]}]}