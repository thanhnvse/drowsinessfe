{"remainingRequest":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\capstone\\DrowsinessFrontEnd\\src\\components\\hostel_type\\chatBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\capstone\\DrowsinessFrontEnd\\src\\components\\hostel_type\\chatBox.vue","mtime":1610216665454},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L2NhcHN0b25lL0Ryb3dzaW5lc3NGcm9udEVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2NhcHN0b25lL0Ryb3dzaW5lc3NGcm9udEVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGRhdGVUaW1lUGlja2VyU3RlcHBlciBmcm9tICcuL2RhdGVUaW1lUGlja2VyU3RlcHBlci52dWUnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnLi4vLi4vY29uZmlnL2ZpcmViYXNlJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi4vLi4vY29uZmlnL3B1c2hOb3RpZmljYXRpb25BY3Rpb25zJzsgLy8gY29uc3QgeyBzZW5kQm9va2luZ05vdGlmaWNhdGlvbiB9ID0gdXRpbHM7Cgp2YXIgc3RvcmUgPSBmaXJlYmFzZS5zdG9yZTsKdmFyIGNoYXRDb2xsZWN0aW9uUmVmID0gc3RvcmUuY29sbGVjdGlvbignY2hhdCcpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NoYXRCb3gnLAogIGNvbXBvbmVudHM6IHsKICAgIGRhdGVUaW1lUGlja2VyU3RlcHBlcjogZGF0ZVRpbWVQaWNrZXJTdGVwcGVyCiAgfSwKICBwcm9wczogWydpbmZvJywgJ2dyb3VwJ10sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGNyZWF0ZUJvb2tpbmc6ICd1c2VyL2NyZWF0ZUJvb2tpbmcnLAogICAgZ2V0RGVhbHM6ICd1c2VyL2dldERlYWxzJywKICAgIGdldEJvb2tpbmdzOiAndXNlci9nZXRCb29raW5ncycsCiAgICBnZXREZWFsOiAndXNlci9nZXREZWFsJywKICAgIGNhbmNlbERlYWw6ICd1c2VyL2NhbmNlbERlYWwnLAogICAgY2FuY2VsQm9va2luZzogJ3VzZXIvY2FuY2VsQm9va2luZycsCiAgICBzZW5kTm90aWZpY2F0aW9uOiAndXNlci9zZW5kTm90aWZpY2F0aW9uJwogIH0pKSwge30sIHsKICAgIG15T25TY3JvbGw6IGZ1bmN0aW9uIG15T25TY3JvbGwoKSB7fSwKICAgIGNsaWNrQm9va2luZzogZnVuY3Rpb24gY2xpY2tCb29raW5nKCkgewogICAgICBpZiAodGhpcy5oYXNJbmNvbW1pbmdCb29raW5nKSB7CiAgICAgICAgdGhpcy5tZXNzYWdlVGl0bGUgPSAnQuG6oW4gxJHDoyBjw7MgbOG7i2NoIGjhurluIHhlbSBsb+G6oWkgcGjDsm5nIG7DoHkhJzsKICAgICAgICB0aGlzLm1lc3NhZ2VBY3Rpb24gPSAnxJDhu4MgxJHhurd0IGzhu4tjaCBo4bq5biBt4bubaSwgdnVpIGzDsm5nIGjhu6d5IGzhu4tjaCBo4bq5biB0csaw4bubYyDEkcOzJzsKICAgICAgICB0aGlzLndhcm5pbmdEaWFsb2cgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodGhpcy5oYXNVbnJlcGx5QmFyZ2FpbikgewogICAgICAgIHRoaXMubWVzc2FnZVRpdGxlID0gJ0LhuqFuIGhp4buHbiB04bqhaSDEkWFuZyBjw7MgbeG7mXQgxJHhu4Egbmdo4buLIHRy4bqjIGdpw6EgY2jGsGEgxJHGsOG7o2MgY2jhuqVwIG5o4bqtbiEnOwogICAgICAgIHRoaXMubWVzc2FnZUFjdGlvbiA9ICfEkOG7gyDEkeG6t3QgbOG7i2NoLCB2dWkgbMOybmcgaOG7p3kgdHLhuqMgZ2nDoSc7CiAgICAgICAgdGhpcy53YXJuaW5nRGlhbG9nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGVUaW1lT3ZlcmxheS5zaG93ID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGNsaWNrRGVhbDogZnVuY3Rpb24gY2xpY2tEZWFsKCkgewogICAgICBpZiAodGhpcy5oYXNVbnJlcGx5QmFyZ2FpbikgewogICAgICAgIHRoaXMubWVzc2FnZVRpdGxlID0gJ0LhuqFuIGhp4buHbiB04bqhaSDEkWFuZyBjw7MgbeG7mXQgxJHhu4Egbmdo4buLIHRy4bqjIGdpw6EgY2jGsGEgxJHGsOG7o2MgY2jhuqVwIG5o4bqtbiEnOwogICAgICAgIHRoaXMubWVzc2FnZUFjdGlvbiA9ICfEkOG7gyDEkeG7gSB4deG6pXQgdHLhuqMgZ2nDoSBt4bubaSwgdnVpIGzDsm5nIGjhu6d5IMSR4buBIHh14bqldCB0cuG6oyBnacOhIHRyxrDhu5tjIMSRw7MnOwogICAgICAgIHRoaXMud2FybmluZ0RpYWxvZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5iYXJnYWluT3ZlcmxheS5zaG93ID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGJhcmdhaW46IGZ1bmN0aW9uIGJhcmdhaW4oY29udGVudCkgewogICAgICB0aGlzLmJhcmdhaW5PdmVybGF5LnNob3cgPSBmYWxzZTsKICAgICAgdmFyIG5ld0NvbnRlbnQgPSBjb250ZW50OwogICAgICBuZXdDb250ZW50LmJhcmdhaW4gPSB7CiAgICAgICAgb3JpZ2luYWxQcmljZTogdGhpcy5pbmZvLnByaWNlLAogICAgICAgIG5ld1ByaWNlOiB0aGlzLmJhcmdhaW5PdmVybGF5LnByaWNlLAogICAgICAgIHN0YXR1czogJ3dhaXQnLAogICAgICAgIHR5cGVOYW1lOiB0aGlzLmluZm8udGl0bGUsCiAgICAgICAgZ3JvdXBzOiB0aGlzLmdyb3VwCiAgICAgIH07CiAgICAgIHRoaXMubWVzc0NvbGxlY3Rpb25SZWYuYWRkKG5ld0NvbnRlbnQpOwogICAgICB0aGlzLm1lc3NDb2xsZWN0aW9uUmVmLnBhcmVudC51cGRhdGUoewogICAgICAgIGxhc3RlZE1lc3NhZ2U6IG5ld0NvbnRlbnQKICAgICAgfSk7CiAgICAgIHRoaXMuc2VuZE5vdGlmaWNhdGlvbih7CiAgICAgICAgdGl0bGU6ICJUclx1MUVBMyBnaVx4RTEgbVx1MUVEQmkgdFx1MUVFQjogIi5jb25jYXQodGhpcy51c2VyU3RhdGUuZGF0YS51c2VybmFtZSksCiAgICAgICAgYm9keTogIiIuY29uY2F0KHRoaXMuaW5mby5wcmljZSwgInRyIC0+ICIpLmNvbmNhdCh0aGlzLmJhcmdhaW5PdmVybGF5LnByaWNlLCAidHIiKSwKICAgICAgICBhY3Rpb246IGFjdGlvbnMuTkVXX01FU1NBR0UsCiAgICAgICAgaWQ6ICcnLAogICAgICAgIGljb246IHRoaXMudXNlclN0YXRlLmRhdGEuYXZhdGFyLAogICAgICAgIHZlbmRvcklkOiB0aGlzLmlkLnZlbmRvcklkLAogICAgICAgIHJlbnRlcklkOiBudWxsCiAgICAgIH0pOwogICAgfSwKICAgIGJvb2s6IGZ1bmN0aW9uIGJvb2soY29udGVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5iYXJnYWluT3ZlcmxheS5zaG93ID0gZmFsc2U7CiAgICAgIHZhciBuZXdDb250ZW50ID0gY29udGVudDsKICAgICAgbmV3Q29udGVudC5ib29rID0gewogICAgICAgIGRhdGU6IHRoaXMuZGF0ZVRpbWVPdmVybGF5LmRhdGUsCiAgICAgICAgdGltZTogdGhpcy5kYXRlVGltZU92ZXJsYXkudGltZSwKICAgICAgICBjYW5jZWw6IGZhbHNlCiAgICAgIH07CiAgICAgIHZhciByZW50ZXJJZCA9IHRoaXMudXNlclN0YXRlLmRhdGEudXNlcklkOwogICAgICB2YXIgX3RoaXMkaWQgPSB0aGlzLmlkLAogICAgICAgICAgdmVuZG9ySWQgPSBfdGhpcyRpZC52ZW5kb3JJZCwKICAgICAgICAgIHR5cGVJZCA9IF90aGlzJGlkLnR5cGVJZDsKICAgICAgdmFyIGxhc3RlZERlYWwgPSB0aGlzLmZpbmRMYXN0ZWREZWFsKHJlbnRlcklkLCB2ZW5kb3JJZCwgdHlwZUlkKTsKICAgICAgdmFyIGRhdGVUaW1lID0gdGhpcy5kYXRlVGltZU92ZXJsYXkuZGF0ZS5zcGxpdCgnLycpOwogICAgICB2YXIgdGltZVRpbWUgPSB0aGlzLmRhdGVUaW1lT3ZlcmxheS50aW1lLnNwbGl0KCc6Jyk7CiAgICAgIHZhciBtZWV0VGltZSA9IG5ldyBEYXRlKGRhdGVUaW1lWzJdLCBkYXRlVGltZVsxXSAtIDEsIGRhdGVUaW1lWzBdLCB0aW1lVGltZVswXSwgdGltZVRpbWVbMV0pLmdldFRpbWUoKTsKICAgICAgdmFyIGJvb2tpbmdUb0FwaSA9IHsKICAgICAgICByZW50ZXJJZDogcmVudGVySWQsCiAgICAgICAgdmVuZG9ySWQ6IHZlbmRvcklkLAogICAgICAgIHR5cGVJZDogdHlwZUlkLAogICAgICAgIG1lZXRUaW1lOiBtZWV0VGltZSwKICAgICAgICBkZWFsSWQ6IGxhc3RlZERlYWwgPyBsYXN0ZWREZWFsLmRlYWxJZCA6IG51bGwsCiAgICAgICAgc3RhdHVzOiAnSU5DT01JTkcnCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGJvb2tpbmdUb0FwaSk7CiAgICAgIHRoaXMuY3JlYXRlQm9va2luZyhib29raW5nVG9BcGkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIHNlbmRCb29raW5nTm90aWZpY2F0aW9uKHRoaXMubmV3bHlDcmVhdGVkQm9va2luZyk7CiAgICAgICAgbmV3Q29udGVudC5ib29rLmJvb2tpbmdJZCA9IF90aGlzLm5ld2x5Q3JlYXRlZEJvb2tpbmcuYm9va2luZ0lkOwoKICAgICAgICBfdGhpcy5tZXNzQ29sbGVjdGlvblJlZi5hZGQobmV3Q29udGVudCk7CgogICAgICAgIF90aGlzLm1lc3NDb2xsZWN0aW9uUmVmLnBhcmVudC51cGRhdGUoewogICAgICAgICAgbGFzdGVkTWVzc2FnZTogbmV3Q29udGVudAogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5zZW5kTm90aWZpY2F0aW9uKHsKICAgICAgICAgIHRpdGxlOiAiTFx1MUVDQmNoIGhcdTFFQjluIG1cdTFFREJpIHRcdTFFRUI6ICIuY29uY2F0KF90aGlzLnVzZXJTdGF0ZS5kYXRhLnVzZXJuYW1lKSwKICAgICAgICAgIGJvZHk6ICJUaFx1MUVERGkgZ2lhbjogIi5jb25jYXQobmV3IERhdGUobWVldFRpbWUpLnRvTG9jYWxlU3RyaW5nKCkpLAogICAgICAgICAgYWN0aW9uOiBhY3Rpb25zLk5FV19CT09LSU5HLAogICAgICAgICAgaWQ6IG5ld0NvbnRlbnQuYm9vay5ib29raW5nSWQsCiAgICAgICAgICBpY29uOiBfdGhpcy51c2VyU3RhdGUuZGF0YS5hdmF0YXIsCiAgICAgICAgICB2ZW5kb3JJZDogX3RoaXMuaWQudmVuZG9ySWQsCiAgICAgICAgICByZW50ZXJJZDogbnVsbAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgICAgIHZhciBjb250ZW50ID0gewogICAgICAgIGJhcmdhaW46IG51bGwsCiAgICAgICAgYm9vazogbnVsbCwKICAgICAgICBtZXNzYWdlOiB0aGlzLmlucHV0Q2hhdC50ZXh0LAogICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSwKICAgICAgICBzZW5kZXI6ICdyZW50ZXInCiAgICAgIH07CiAgICAgIHRoaXMuY3JlYXRlRG9jKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHR5cGUgPT09IG51bGwpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdjb250ZW50JywgY29udGVudCk7CgogICAgICAgICAgX3RoaXMyLm1lc3NDb2xsZWN0aW9uUmVmLmFkZChjb250ZW50KTsKCiAgICAgICAgICBfdGhpczIuZG9jUmVmLnVwZGF0ZSh7CiAgICAgICAgICAgIGxhc3RlZE1lc3NhZ2U6IGNvbnRlbnQKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMi5zZW5kTm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgdGl0bGU6ICJUaW4gbmhcdTFFQUZuIG1cdTFFREJpIHRcdTFFRUI6ICIuY29uY2F0KF90aGlzMi51c2VyU3RhdGUuZGF0YS51c2VybmFtZSksCiAgICAgICAgICAgIGJvZHk6ICIiLmNvbmNhdChjb250ZW50Lm1lc3NhZ2UpLAogICAgICAgICAgICBhY3Rpb246ICdORVdfTUVTU0FHRScsCiAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgaWNvbjogX3RoaXMyLnVzZXJTdGF0ZS5kYXRhLmF2YXRhciwKICAgICAgICAgICAgdmVuZG9ySWQ6IF90aGlzMi5pZC52ZW5kb3JJZCwKICAgICAgICAgICAgcmVudGVySWQ6IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2snKSB7CiAgICAgICAgICBfdGhpczIuYm9vayhjb250ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdiYXJnYWluJykgewogICAgICAgICAgX3RoaXMyLmJhcmdhaW4oY29udGVudCk7CgogICAgICAgICAgX3RoaXMyLmJhcmdhaW5PdmVybGF5LnN0ZXAgPSAxOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLmRvY1JlZi51cGRhdGUoewogICAgICAgICAgdXBkYXRlZDogRGF0ZS5ub3coKQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5zY3JvbGxUb0JvdHRvbSgpOwoKICAgICAgICBfdGhpczIuaW5wdXRDaGF0LnRleHQgPSAnJzsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlRG9jOiBmdW5jdGlvbiBjcmVhdGVEb2MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdXNlcklkLCBfdGhpczMkaWQsIHZlbmRvcklkLCB0eXBlSWQsIGdyb3VwSWQsIGRvY1JlZjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXNlcklkID0gX3RoaXMzLnVzZXJTdGF0ZS5kYXRhLnVzZXJJZDsKICAgICAgICAgICAgICAgIF90aGlzMyRpZCA9IF90aGlzMy5pZCwgdmVuZG9ySWQgPSBfdGhpczMkaWQudmVuZG9ySWQsIHR5cGVJZCA9IF90aGlzMyRpZC50eXBlSWQsIGdyb3VwSWQgPSBfdGhpczMkaWQuZ3JvdXBJZDsKICAgICAgICAgICAgICAgIGRvY1JlZiA9IGNoYXRDb2xsZWN0aW9uUmVmLmRvYygicmVudGVyLSIuY29uY2F0KHVzZXJJZCwgIjp2ZW5kb3ItIikuY29uY2F0KHZlbmRvcklkLCAiOnR5cGUtIikuY29uY2F0KHR5cGVJZCkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZG9jUmVmLmdldCgpLnRoZW4oZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgICBpZiAoIWRvYy5leGlzdHMpIHsKICAgICAgICAgICAgICAgICAgICBkb2MucmVmLnNldCh7CiAgICAgICAgICAgICAgICAgICAgICB2ZW5kb3JJZDogdmVuZG9ySWQsCiAgICAgICAgICAgICAgICAgICAgICByZW50ZXJJZDogdXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgdHlwZUlkOiB0eXBlSWQsCiAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBncm91cElkLAogICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICAgIGxhc3RlZE1lc3NhZ2U6IG51bGwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzMy5tZXNzQ29sbGVjdGlvblJlZiA9IGRvY1JlZi5jb2xsZWN0aW9uKCdtZXNzYWdlcycpOwogICAgICAgICAgICAgICAgX3RoaXMzLmRvY1JlZiA9IGRvY1JlZjsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldE1lc3NhZ2U6IGZ1bmN0aW9uIHNldE1lc3NhZ2UobWVzc2FnZXMpIHsKICAgICAgdGhpcy5pdGVtcyA9IG1lc3NhZ2VzOwogICAgfSwKICAgIGZldGNoTWVzc2FnZXM6IGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gdGhpcy5jcmVhdGVEb2MoKTsKICAgICAgdmFyIHVzZXJJZCA9IHRoaXMudXNlclN0YXRlLmRhdGEudXNlcklkOwogICAgICB2YXIgX3RoaXMkaWQyID0gdGhpcy5pZCwKICAgICAgICAgIHZlbmRvcklkID0gX3RoaXMkaWQyLnZlbmRvcklkLAogICAgICAgICAgdHlwZUlkID0gX3RoaXMkaWQyLnR5cGVJZDsKICAgICAgdmFyIGRvY1JlZiA9IGNoYXRDb2xsZWN0aW9uUmVmLmRvYygicmVudGVyLSIuY29uY2F0KHVzZXJJZCwgIjp2ZW5kb3ItIikuY29uY2F0KHZlbmRvcklkLCAiOnR5cGUtIikuY29uY2F0KHR5cGVJZCkpOwogICAgICB0aGlzLm1lc3NDb2xsZWN0aW9uUmVmID0gZG9jUmVmLmNvbGxlY3Rpb24oJ21lc3NhZ2VzJyk7CiAgICAgIHRoaXMubWVzc0NvbGxlY3Rpb25SZWYub3JkZXJCeSgnY3JlYXRlZEF0JywgJ2FzYycpLm9uU25hcHNob3QoZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHsKICAgICAgICB2YXIgaXRlbXMgPSBbXTsKICAgICAgICBfdGhpczQuZGVhbElkcyA9IFtdOwogICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IGRvYy5kYXRhKCk7CiAgICAgICAgICBpdGVtcy5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgICAgIGlkOiBkb2MuaWQKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBpZiAoZGF0YS5iYXJnYWluICYmIGRhdGEuYmFyZ2Fpbi5kZWFsSWQpIHsKICAgICAgICAgICAgX3RoaXM0LmRlYWxJZHMucHVzaChkYXRhLmJhcmdhaW4uZGVhbElkKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfdGhpczQuaXRlbXMgPSBpdGVtczsKCiAgICAgICAgX3RoaXM0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnNjcm9sbFRvQm90dG9tKCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChfdGhpczQuZGVhbElkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBfdGhpczQuZ2V0RGVhbHMoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNjcm9sbFRvQm90dG9tOiBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSgpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgIHZhciBjaGF0Ym94ID0gdGhpcy4kcmVmcy5jaGF0Ym94OwogICAgICBjaGF0Ym94LnNjcm9sbFRvcCA9IGNoYXRib3guc2Nyb2xsSGVpZ2h0OwogICAgfSwKICAgIHJlY2VpdmVkRGF0ZVRpbWU6IGZ1bmN0aW9uIHJlY2VpdmVkRGF0ZVRpbWUoZSkgewogICAgICB0aGlzLmRhdGVUaW1lT3ZlcmxheS5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuZGF0ZVRpbWVPdmVybGF5LmRhdGUgPSBlLmRhdGU7CiAgICAgIHRoaXMuZGF0ZVRpbWVPdmVybGF5LnRpbWUgPSBlLnRpbWU7CiAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoJ2Jvb2snKTsKICAgIH0sCiAgICBnZXRTaW1wbGVGb3JtYXREYXRlOiBmdW5jdGlvbiBnZXRTaW1wbGVGb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdChkYXRlLmdldERhdGUoKSwgIi9cbiAgICAgICAgICAgICIpLmNvbmNhdChkYXRlLmdldE1vbnRoKCkgKyAxLCAiL1xuICAgICAgICAgICAgIikuY29uY2F0KGRhdGUuZ2V0RnVsbFllYXIoKSk7CiAgICB9LAogICAgZG9DYW5jZWxEZWFsOiBmdW5jdGlvbiBkb0NhbmNlbERlYWwoZGVhbElkKSB7CiAgICAgIHRoaXMuY2FuY2VsRGVhbChkZWFsSWQpOwogICAgfSwKICAgIGRvQ2FuY2VsQm9va2luZzogZnVuY3Rpb24gZG9DYW5jZWxCb29raW5nKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRib29raW5nQ2FuY2VsJGkgPSB0aGlzLmJvb2tpbmdDYW5jZWwuaWQsCiAgICAgICAgICBib29raW5nSWQgPSBfdGhpcyRib29raW5nQ2FuY2VsJGkuYm9va2luZ0lkLAogICAgICAgICAgZG9jSWQgPSBfdGhpcyRib29raW5nQ2FuY2VsJGkuZG9jSWQ7CiAgICAgIHRoaXMuY2FuY2VsQm9va2luZyhib29raW5nSWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5tZXNzQ29sbGVjdGlvblJlZi5kb2MoZG9jSWQpLnVwZGF0ZSh7CiAgICAgICAgICAnYm9vay5jYW5jZWwnOiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzNS5ib29raW5nQ2FuY2VsLmlkLmJvb2tpbmdJZCA9IG51bGw7CiAgICAgICAgX3RoaXM1LmJvb2tpbmdDYW5jZWwuaWQuZG9jSWQgPSBudWxsOwogICAgICAgIF90aGlzNS5ib29raW5nQ2FuY2VsLnNob3cgPSBmYWxzZTsKCiAgICAgICAgX3RoaXM1LmdldEJvb2tpbmdzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dCb29raW5nQ2FuY2VsOiBmdW5jdGlvbiBzaG93Qm9va2luZ0NhbmNlbChib29raW5nSWQsIGRvY0lkKSB7CiAgICAgIHRoaXMuYm9va2luZ0NhbmNlbC5zaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5ib29raW5nQ2FuY2VsLmlkID0gewogICAgICAgIGJvb2tpbmdJZDogYm9va2luZ0lkLAogICAgICAgIGRvY0lkOiBkb2NJZAogICAgICB9OwogICAgfSwKICAgIGRvQ2FuY2VsQmFyZ2FpbjogZnVuY3Rpb24gZG9DYW5jZWxCYXJnYWluKCkgewogICAgICB2YXIgZG9jSWQgPSB0aGlzLmJhcmdhaW5DYW5jZWwuaWQuZG9jSWQ7CiAgICAgIHRoaXMubWVzc0NvbGxlY3Rpb25SZWYuZG9jKGRvY0lkKS51cGRhdGUoewogICAgICAgICdiYXJnYWluLnN0YXR1cyc6ICdjYW5jZWwnCiAgICAgIH0pOwogICAgICB0aGlzLnJlc2V0QmFyZ2FpbkNhbmNlbCgpOwogICAgfSwKICAgIHNob3dCYXJnYWluQ2FuY2VsOiBmdW5jdGlvbiBzaG93QmFyZ2FpbkNhbmNlbChkb2NJZCkgewogICAgICB0aGlzLmJhcmdhaW5DYW5jZWwuc2hvdyA9IHRydWU7CiAgICAgIHRoaXMuYmFyZ2FpbkNhbmNlbC5pZC5kb2NJZCA9IGRvY0lkOwogICAgfSwKICAgIHJlc2V0QmFyZ2FpbkNhbmNlbDogZnVuY3Rpb24gcmVzZXRCYXJnYWluQ2FuY2VsKCkgewogICAgICB0aGlzLmJhcmdhaW5DYW5jZWwuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLmJhcmdhaW5DYW5jZWwuaWQuZG9jSWQgPSBudWxsOwogICAgfSwKICAgIGdldEF2YXRhclRpdGxlOiBmdW5jdGlvbiBnZXRBdmF0YXJUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAuZ3JvdXBOYW1lLnN1YnN0cmluZyh0aGlzLmdyb3VwLmdyb3VwTmFtZS5sYXN0SW5kZXhPZignICcpICsgMSkuc3Vic3RyaW5nKDAsIDEpOwogICAgfSwKICAgIGdldFRpbWVTZW5kTXNnOiBmdW5jdGlvbiBnZXRUaW1lU2VuZE1zZyhjcmVhdGVkVGltZSkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGNyZWF0ZWRUaW1lKS50b0xvY2FsZURhdGVTdHJpbmcoJ3ZpLXZuJyk7CiAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoY3JlYXRlZFRpbWUpLnRvTG9jYWxlVGltZVN0cmluZygndmktdm4nKS5zdWJzdHIoMCwgNSk7CiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCd2aS12bicpOwoKICAgICAgaWYgKHRvZGF5ID09PSBkYXRlKSB7CiAgICAgICAgcmV0dXJuIHRpbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiAiIi5jb25jYXQodGltZSwgIiwgIikuY29uY2F0KGRhdGUpOwogICAgfSwKICAgIGNvbXBhcmVCYXJnYWluUHJpY2U6IGZ1bmN0aW9uIGNvbXBhcmVCYXJnYWluUHJpY2Uob3JpZ2luYWxQcmljZSwgYmFyZ2FpblByaWNlKSB7CiAgICAgIHJldHVybiBOdW1iZXIob3JpZ2luYWxQcmljZSkgPj0gTnVtYmVyKGJhcmdhaW5QcmljZSk7CiAgICB9CiAgfSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gISF2YWx1ZSB8fCAnR2nDoSBraMO0bmcgaOG7o3AgbOG7hyc7CiAgICAgICAgfSwKICAgICAgICBtYXg6IGZ1bmN0aW9uIG1heCh2YWx1ZSwgX21heCkgewogICAgICAgICAgcmV0dXJuICh2YWx1ZSB8fCAnR2nDoSBraMO0bmcgaOG7o3AgbOG7hycpIDwgX21heCB8fCAiR2lceEUxIHRodVx4RUEgblx4RUFuIG5oXHUxRUNGIGhcdTAxQTFuICIuY29uY2F0KF9tYXgpOwogICAgICAgIH0sCiAgICAgICAgbWluOiBmdW5jdGlvbiBtaW4odmFsdWUpIHsKICAgICAgICAgIHJldHVybiAodmFsdWUgfHwgJ0dpw6Ega2jDtG5nIGjhu6NwIGzhu4cnKSA+IDAgfHwgJ0dpw6EgdGh1w6ogbsOqbiBs4bubbiBoxqFuIDAnOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYm9va2luZ0NhbmNlbDogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIGlkOiB7CiAgICAgICAgICBib29raW5nSWQ6IG51bGwsCiAgICAgICAgICBkb2NJZDogbnVsbAogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFyZ2FpbkNhbmNlbDogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIGlkOiB7CiAgICAgICAgICBkb2NJZDogbnVsbAogICAgICAgIH0KICAgICAgfSwKICAgICAgZGF0ZVRpbWVPdmVybGF5OiB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgd2lkdGg6IDM1MCwKICAgICAgICBkYXRlOiAnJywKICAgICAgICB0aW1lOiAnJwogICAgICB9LAogICAgICBiYXJnYWluT3ZlcmxheTogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIHByaWNlOiAwLAogICAgICAgIHN0ZXA6IDEKICAgICAgfSwKICAgICAgaW5wdXRDaGF0OiB7CiAgICAgICAgdGV4dDogJycKICAgICAgfSwKICAgICAgaXRlbXM6IFtdLAogICAgICBtZXNzQ29sbGVjdGlvblJlZjogbnVsbCwKICAgICAgZG9jUmVmOiBudWxsLAogICAgICBkZWFsSWRzOiBbXSwKICAgICAgd2FybmluZ0RpYWxvZzogZmFsc2UsCiAgICAgIG1lc3NhZ2VBY3Rpb246ICcnLAogICAgICBtZXNzYWdlVGl0bGU6ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgIFByb21pc2UuYWxsKFt0aGlzLmdldERlYWxzLCB0aGlzLmdldEJvb2tpbmdzXSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzNi5mZXRjaE1lc3NhZ2VzKCk7CiAgICB9KTsKICAgIHRoaXMuYmFyZ2Fpbk92ZXJsYXkucHJpY2UgPSB0aGlzLmluZm8ucHJpY2UgLSAwLjE7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICBpc0xvYWRpbmc6IGZ1bmN0aW9uIGlzTG9hZGluZygpIHsKICAgICAgdmFyIGxvYWRpbmdVc2VyID0gdGhpcy51c2VyU3RhdGUuaXNMb2FkaW5nOwogICAgICB2YXIgbG9hZGluZ0Jvb2tpbmdzID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ib29raW5ncy5pc0xvYWRpbmc7CiAgICAgIHZhciBsb2FkaW5nRGVhbHMgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmJvb2tpbmdzLmlzTG9hZGluZzsKICAgICAgcmV0dXJuIGxvYWRpbmdVc2VyIHx8IGxvYWRpbmdCb29raW5ncyB8fCBsb2FkaW5nRGVhbHM7CiAgICB9CiAgfSwgbWFwR2V0dGVycyh7CiAgICBmaW5kTGFzdGVkRGVhbDogJ3VzZXIvZmluZExhc3RlZERlYWwnLAogICAgZmluZFBlbmRpbmdCb29raW5nOiAndXNlci9maW5kUGVuZGluZ0Jvb2tpbmcnCiAgfSkpLCB7fSwgewogICAgaGFzUGVuZGluZ0RlYWw6IGZ1bmN0aW9uIGhhc1BlbmRpbmdEZWFsKCkgewogICAgICB2YXIgcmVudGVySWQgPSB0aGlzLnVzZXJTdGF0ZS5kYXRhLnVzZXJJZDsKICAgICAgdmFyIF90aGlzJGlkMyA9IHRoaXMuaWQsCiAgICAgICAgICB2ZW5kb3JJZCA9IF90aGlzJGlkMy52ZW5kb3JJZCwKICAgICAgICAgIHR5cGVJZCA9IF90aGlzJGlkMy50eXBlSWQ7CiAgICAgIHZhciByZXMgPSB0aGlzLmZpbmRMYXN0ZWREZWFsKHJlbnRlcklkLCB2ZW5kb3JJZCwgdHlwZUlkKTsKCiAgICAgIGlmIChyZXMpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGhhc1BlbmRpbmdCb29raW5nOiBmdW5jdGlvbiBoYXNQZW5kaW5nQm9va2luZygpIHsKICAgICAgdmFyIHJlbnRlcklkID0gdGhpcy51c2VyU3RhdGUuZGF0YS51c2VySWQ7CiAgICAgIHZhciBfdGhpcyRpZDQgPSB0aGlzLmlkLAogICAgICAgICAgdmVuZG9ySWQgPSBfdGhpcyRpZDQudmVuZG9ySWQsCiAgICAgICAgICB0eXBlSWQgPSBfdGhpcyRpZDQudHlwZUlkOwogICAgICB2YXIgcmVzID0gdGhpcy5maW5kUGVuZGluZ0Jvb2tpbmcocmVudGVySWQsIHZlbmRvcklkLCB0eXBlSWQpOwoKICAgICAgaWYgKCFyZXMpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGhhc0Jvb2tpbmdJbmNvbWluZzogZnVuY3Rpb24gaGFzQm9va2luZ0luY29taW5nKCkgewogICAgICB2YXIgYm9va2luZ0luY29taW5nID0gdGhpcy5pdGVtcy5maW5kKGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuYm9vayAmJiAhbWVzc2FnZS5ib29rLmNhbmNlbDsKICAgICAgfSk7CiAgICAgIHJldHVybiBib29raW5nSW5jb21pbmcgIT09IHVuZGVmaW5lZDsKICAgIH0sCiAgICB1c2VyU3RhdGU6IGZ1bmN0aW9uIHVzZXJTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcjsKICAgIH0sCiAgICBpZDogZnVuY3Rpb24gaWQoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZUlkOiB0aGlzLmluZm8udHlwZUlkLAogICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXAuZ3JvdXBJZCwKICAgICAgICByZW50ZXJJZDogdGhpcy51c2VyU3RhdGUucmVudGVySWQsCiAgICAgICAgdmVuZG9ySWQ6IHRoaXMuZ3JvdXAudmVuZG9ySWQKICAgICAgfTsKICAgIH0sCiAgICBpc0NyZWF0aW5nQm9va2luZzogZnVuY3Rpb24gaXNDcmVhdGluZ0Jvb2tpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmJvb2tpbmdzLmlzTG9hZGluZzsKICAgIH0sCiAgICBuZXdseUNyZWF0ZWRCb29raW5nOiBmdW5jdGlvbiBuZXdseUNyZWF0ZWRCb29raW5nKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ib29raW5ncy5uZXdseUNyZWF0ZWQ7CiAgICB9LAogICAgZmlsdGVyZWRNZXNzYWdlOiBmdW5jdGlvbiBmaWx0ZXJlZE1lc3NhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnNlbmRlciA9PT0gJ3ZlbmRvcicgJiYgaXRlbS5iYXJnYWluKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGFzdERlYWw6IGZ1bmN0aW9uIGdldExhc3REZWFsKCkgewogICAgICB2YXIgYWxsTXNnID0gdGhpcy5maWx0ZXJlZE1lc3NhZ2U7CiAgICAgIGFsbE1zZy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEuY3JlYXRlZEF0IC0gYi5jcmVhdGVkQXQ7CiAgICAgIH0pOwogICAgICBhbGxNc2cgPSBhbGxNc2cuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uc2VuZGVyID09PSAncmVudGVyJyAmJiBtLmJhcmdhaW4gJiYgbS5iYXJnYWluLnN0YXR1cyA9PT0gJ2FjY2VwdCc7CiAgICAgIH0pOwoKICAgICAgaWYgKGFsbE1zZyAmJiBhbGxNc2cubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIGFsbE1zZ1thbGxNc2cubGVuZ3RoIC0gMV07CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGhhc1VucmVwbHlCYXJnYWluOiBmdW5jdGlvbiBoYXNVbnJlcGx5QmFyZ2FpbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnNlbmRlciA9PT0gJ3JlbnRlcicgJiYgaXRlbS5iYXJnYWluICYmIGl0ZW0uYmFyZ2Fpbi5zdGF0dXMgPT09ICd3YWl0JzsKICAgICAgfSk7CiAgICB9LAogICAgYm9va2luZ3M6IGZ1bmN0aW9uIGJvb2tpbmdzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ib29raW5ncy5kYXRhOwogICAgfSwKICAgIGhhc0luY29tbWluZ0Jvb2tpbmc6IGZ1bmN0aW9uIGhhc0luY29tbWluZ0Jvb2tpbmcoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuYm9va2luZ3MuZmluZChmdW5jdGlvbiAoYikgewogICAgICAgIHJldHVybiBiLnR5cGUudHlwZUlkID09PSBfdGhpczcudHlwZUlkICYmIGIuc3RhdHVzID09PSAnSU5DT01JTkcnOwogICAgICB9KSAmJiB0aGlzLmJvb2tpbmdzLmZpbmQoZnVuY3Rpb24gKGIpIHsKICAgICAgICByZXR1cm4gYi50eXBlLnR5cGVJZCA9PT0gX3RoaXM3LnR5cGVJZCAmJiBiLnN0YXR1cyA9PT0gJ0lOQ09NSU5HJzsKICAgICAgfSkubGVuZ3RoICE9PSAwOwogICAgfQogIH0pCn07"},{"version":3,"sources":["chatBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- eslint-disable max-len -->\n  <v-card :loading=\"isLoading\">\n    <v-dialog v-model=\"warningDialog\" max-width=\"400\">\n      <v-card>\n        <v-card-title class=\"d-flex flex-column justify-center px-8\">\n          <v-icon large class=\"material-icons-outlined\" color=\"#ffbc00\">report_problem</v-icon>\n          <span\n            class=\"text-gray font-nunito\"\n            style=\"\n              font-size: 1.125rem !important;\n              text-align: center !important;\n              font-weight: 700 !important;\n            \"\n            >{{ messageTitle }}</span\n          >\n          <span\n            class=\"font-nunito\"\n            style=\"\n              font-size: 0.9rem;\n              font-weight: 400;\n              text-align: center !important;\n              color: #ffbc00;\n            \"\n            >{{ messageAction }}</span\n          >\n        </v-card-title>\n      </v-card>\n    </v-dialog>\n    <v-card-title class=\"px-3 py-3\">\n      <v-avatar color=\"#727cf5\" height=\"30\" width=\"30\" min-width=\"30\">\n        <v-img max-height=\"30\" max-width=\"30\" v-if=\"group.imgUrl\" :src=\"group.imgUrl\" />\n        <span class=\"text-overline white--text\" v-else>{{ getAvatarTitle() }}</span>\n      </v-avatar>\n      <span class=\"text-subtitle-2 ml-3 text-primary\">{{ group.groupName }}</span>\n      <v-spacer />\n      <v-btn small icon color=\"#727cf5\" @click=\"$emit('close')\">\n        <v-icon>clear</v-icon>\n      </v-btn>\n    </v-card-title>\n    <v-divider />\n    <div\n      style=\"max-height: 350px; min-height: 300px\"\n      class=\"overflow-y-auto\"\n      id=\"chatbox\"\n      ref=\"chatbox\"\n    >\n      <v-overlay :value=\"dateTimeOverlay.show\" absolute opacity=\"0.8\">\n        <dateTimePickerStepper\n          :width=\"dateTimeOverlay.width\"\n          v-on:ok=\"receivedDateTime\"\n          v-on:cancel=\"dateTimeOverlay.show = false\"\n          :groupId=\"group.groupId\"\n          :price=\"info.price\"\n          :lastDeal=\"getLastDeal\"\n          :priceUnit=\"info.priceUnit\"\n        />\n      </v-overlay>\n      <v-overlay :value=\"bookingCancel.show\" absolute opacity=\"0.8\">\n        <v-card class=\"white d-flex flex-column justify-center align-center py-3\" width=\"400\">\n          <v-card-title class=\"font-weight-bold text-body-1\" style=\"color: #171e8d\"\n            >Bạn có muốn hủy lịch hẹn?</v-card-title\n          >\n          <v-card-actions>\n            <!-- toDo: tai sao huy lich hen -->\n            <v-btn\n              small\n              color=\"#eb3518\"\n              class=\"text-caption px-4 py-2 mx-2 white--text\"\n              depressed\n              @click=\"doCancelBooking\"\n              >Có</v-btn\n            >\n            <v-btn\n              small\n              color=\"#4F60C9\"\n              class=\"text-caption px-4 py-2 mx-2 white--text\"\n              depressed\n              @click=\"bookingCancel.show = false\"\n              >Không</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-overlay>\n      <v-overlay :value=\"bargainCancel.show\" absolute opacity=\"0.8\">\n        <v-card class=\"white d-flex flex-column justify-center align-center py-3\" width=\"400\">\n          <v-card-title class=\"font-weight-bold text-body-1\" style=\"color: #171e8d\"\n            >Bạn có muốn hủy trả giả này?</v-card-title\n          >\n          <v-card-actions>\n            <v-btn\n              small\n              color=\"#eb3518\"\n              class=\"text-caption px-4 py-2 mx-2 white--text\"\n              depressed\n              @click=\"doCancelBargain\"\n              >Có</v-btn\n            >\n            <v-btn\n              small\n              color=\"#4F60C9\"\n              class=\"text-caption px-4 py-2 mx-2 white--text\"\n              depressed\n              @click=\"resetBargainCancel\"\n              >Không</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-overlay>\n      <v-overlay\n        :value=\"bargainOverlay.show\"\n        absolute\n        opacity=\"0.8\"\n        class=\"justify-center align-center\"\n      >\n        <v-card\n          color=\"white\"\n          class=\"d-flex flex-column justify-center align-center pa-2\"\n          v-if=\"bargainOverlay.step === 1\"\n          min-width=\"400\"\n        >\n          <v-card-text>\n            <span class=\"text-h6\" :style=\"{ color: '#5a669f', textAlign: 'center' }\">\n              {{ info.title }}\n            </span>\n          </v-card-text>\n          <v-list-item>\n            <v-list-item-content class=\"pa-0\">\n              <span class=\"text-caption\" style=\"color: #b4b6d1\">Giá gốc</span>\n              <p class=\"d-flex align-center mt-1\">\n                <v-img max-height=\"30\" max-width=\"30\" src=\"@/assets/typeDetail/price.png\" />\n                <!-- toDo unit -->\n                <span class=\"text-body-1 ml-2\" style=\"color: #101526\"\n                  >{{ info.price }} {{ info.priceUnit }} phòng/tháng</span\n                >\n              </p>\n              <span class=\"text-caption mt-3\" style=\"color: #b4b6d1\">Giá bạn muốn đề xuất</span>\n              <v-text-field\n                class=\"mt-1 text-body-2\"\n                type=\"number\"\n                outlined\n                dense\n                light\n                _hide-details\n                v-model=\"bargainOverlay.price\"\n                suffix=\"Triệu\"\n                step=\"0.1\"\n                min=\"0\"\n                :max=\"`${info.price - 0.1}`\"\n                :rules=\"[\n                  rules.required,\n                  rules.max(bargainOverlay.price, info.price),\n                  rules.min(bargainOverlay.price),\n                ]\"\n              />\n            </v-list-item-content>\n          </v-list-item>\n          <v-card-actions class=\"mt-6\">\n            <v-btn\n              small\n              color=\"#4F60C9\"\n              class=\"text-caption px-4 py-2 mx-2 white--text\"\n              depressed\n              @click=\"bargainOverlay.step += 1\"\n              >Tiếp tục</v-btn\n            >\n            <v-btn\n              small\n              outlined\n              color=\"#9e9fa7\"\n              class=\"text-caption px-4 py-2 mx-2\"\n              depressed\n              @click=\"\n                bargainOverlay.show = false;\n                bargainOverlay.step = 1;\n              \"\n              >Hủy</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n        <v-card\n          v-if=\"bargainOverlay.step === 2\"\n          color=\"white\"\n          class=\"d-flex flex-column justify-center align-center pa-1\"\n        >\n          <v-card-text v-if=\"Number(bargainOverlay.price) !== Number(info.price)\">\n            <span class=\"text-subtitle-1\" style=\"color: #101526\">\n              Bạn đồng ý trả giá\n              <span class=\"font-weight-bold\" style=\"color: #171c8b\">\n                {{ bargainOverlay.price }}\n              </span>\n              triệu đồng?\n            </span>\n          </v-card-text>\n          <v-card-text v-if=\"Number(bargainOverlay.price) === Number(info.price)\">\n            <span class=\"text-subtitle-1\" style=\"color: #101526\">\n              Giá đang trả giá bằng với giá gốc!\n              <span class=\"font-weight-bold\" style=\"color: #171c8b\">\n                {{ bargainOverlay.price }}\n              </span>\n              triệu đồng?\n            </span>\n          </v-card-text>\n          <v-card-actions>\n            <div class=\"d-flex align-center justify-space-around pb-1\">\n              <v-btn\n                small\n                v-if=\"Number(bargainOverlay.price) !== Number(info.price)\"\n                color=\"#4F60C9\"\n                class=\"text-caption px-4 py-2 mx-2\"\n                depressed\n                @click=\"sendMessage('bargain')\"\n                >Có</v-btn\n              >\n              <v-btn\n                small\n                v-if=\"Number(bargainOverlay.price) === Number(info.price)\"\n                color=\"#4F60C9\"\n                class=\"text-caption px-4 py-2 mx-2\"\n                depressed\n                @click=\"bargainOverlay.step = 1\"\n                >Quay lại</v-btn\n              >\n              <v-btn\n                small\n                outlined\n                color=\"#9e9fa7\"\n                class=\"text-caption px-4 py-2 mx-2\"\n                @click=\"\n                  bargainOverlay.show = false;\n                  bargainOverlay.step = 1;\n                \"\n                >Hủy</v-btn\n              >\n            </div>\n          </v-card-actions>\n        </v-card>\n      </v-overlay>\n      <v-list v-scroll.self=\"myOnScroll\" justify=\"center\">\n        <!-- type information -->\n        <div class=\"d-flex justify-start ml-4 vendorChatMessage\" :style=\"{ width: '70%' }\">\n          <v-col cols=\"4\">\n            <v-img\n              :src=\"info.imageUrls[0].resourceUrl\"\n              v-if=\"info.imageUrls.length !== 0\"\n              max-height=\"50\"\n            />\n          </v-col>\n          <v-col cols=\"8\" class=\"flex pl-0 pr-1\">\n            <span\n              class=\"text-caption\"\n              style=\"\n                display: block;\n                display: -webkit-box;\n                -webkit-line-clamp: 1;\n                -webkit-box-orient: vertical;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                color: #32465a;\n              \"\n              >{{ info.title }}</span\n            >\n            <span class=\"text-body-1 font-weight-medium text-primary\"\n              >₫ {{ info.price }} {{ info.priceUnit }}</span\n            >\n          </v-col>\n        </div>\n        <!-- all message -->\n        <v-list-item v-for=\"item in filteredMessage\" v-bind:key=\"item.createdAt\">\n          <v-list-item-content>\n            <div v-if=\"item.sender === 'renter'\" class=\"d-flex flex-column align-end\">\n              <div class=\"d-flex justify-center\" v-if=\"item.bargain\" style=\"width: 100%\">\n                <div\n                  v-ripple\n                  style=\"width: 85%\"\n                  class=\"d-flex flex-column justify-center align-center renterEvent lighten-5 py-4 px-4 max-w-3/4\"\n                >\n                  <span\n                    class=\"font-weight-bold text-primary font-nunito\"\n                    style=\"font-size: 0.9375rem\"\n                    >TRẢ GIÁ</span\n                  >\n                  <div class=\"d-flex justify-space-between align-center my-4\" style=\"width: 100%\">\n                    <span\n                      class=\"font-nunito font-weight-regular text-gray text-subtitle-2 d-flex align-center\"\n                      ><v-icon class=\"mr-1\">mdi-home-currency-usd</v-icon> {{ info.price }}\n                      {{ info.priceUnit }}</span\n                    >\n                    <span class=\"font-nunito font-weight-regular text-warning text-subtitle-2\">\n                      <v-icon color=\"#ffbc00\">{{\n                        Number(info.price) >= Number(item.bargain.newPrice)\n                          ? 'mdi mdi-arrow-down-bold'\n                          : 'mdi mdi-arrow-up-bold'\n                      }}</v-icon>\n                      {{ item.bargain.newPrice }} {{ info.priceUnit }}\n                    </span>\n                  </div>\n                  <span\n                    v-if=\"item.bargain.status === 'wait'\"\n                    class=\"mb-3 text-caption font-weight-regular font-nunito text-primary mr-auto\"\n                  >\n                    <v-icon small color=\"#727cf5\" class=\"mr-2\">fas fa-spinner fa-spin</v-icon>Đang\n                    chờ phản hồi của chủ trọ\n                  </span>\n                  <span\n                    v-if=\"item.bargain.status === 'deny'\"\n                    class=\"mb-3 text-caption font-weight-regular font-nunito mr-auto text-primary\"\n                  >\n                    <v-icon small color=\"#727cf5\" class=\"mr-2\">thumb_down</v-icon>Chủ trọ không đồng\n                    ý với mức giá của bạn\n                  </span>\n                  <span\n                    v-if=\"item.bargain.status === 'accept'\"\n                    class=\"mb-3 text-caption font-weight-regular font-nunito mr-auto text-primary\"\n                  >\n                    <v-icon small color=\"#727cf5\" class=\"mr-2\">thumb_up</v-icon>Chủ trọ đã đồng ý\n                    với mức giá của bạn\n                  </span>\n                  <v-btn\n                    min-width=\"100%\"\n                    class=\"mb-3 py-5 text-subtitle-2\"\n                    depressed\n                    color=\"#e4e6eb\"\n                    small\n                    v-if=\"item.bargain.status === 'cancel'\"\n                    >Bạn đã hủy trả giá này</v-btn\n                  >\n                  <v-btn\n                    min-width=\"100%\"\n                    class=\"mb-3 py-5 text-subtitle-2\"\n                    depressed\n                    color=\"#e4e6eb\"\n                    small\n                    v-if=\"item.bargain.status === 'wait'\"\n                    @click=\"showBargainCancel(item.id)\"\n                    >Hủy trả giá này</v-btn\n                  >\n                </div>\n              </div>\n\n              <div class=\"d-flex justify-center\" v-else-if=\"item.book\" style=\"width: 100%\">\n                <div\n                  v-ripple\n                  style=\"width: 85%\"\n                  class=\"d-flex flex-column justify-center align-center renterEvent lighten-5 py-4 px-4 max-w-3/4\"\n                >\n                  <span\n                    class=\"font-weight-bold text-primary font-nunito\"\n                    style=\"font-size: 0.9375rem\"\n                    >LỊCH HẸN</span\n                  >\n                  <div class=\"d-flex justify-space-between align-center my-4\" style=\"width: 100%\">\n                    <!-- <span class=\"d-flex flex-column\"> -->\n                    <span\n                      class=\"font-nunito font-weight-regular text-gray text-subtitle-2 d-flex align-center\"\n                    >\n                      <v-icon class=\"mr-1\" color=\"#0acf97\">event_available</v-icon>\n                      {{ item.book.date }}\n                    </span>\n                    <!-- <span\n                        class=\"font-nunito font-weight-regular text-gray text-subtitle-2 d-flex align-center\"\n                      >\n                        <v-icon class=\"mr-1\" color=\"#727cf5\">mdi-home-currency-usd</v-icon>\n                        <span class=\"text-decoration-line-through\"\n                          >{{ getLastDeal.bargain.originalPrice }} {{ info.priceUnit }}</span\n                        >\n                      </span> -->\n                    <!-- </span> -->\n                    <!-- <span class=\"d-flex flex-column\"> -->\n                    <span\n                      class=\"font-nunito font-weight-regular text-gray text-subtitle-2 d-flex align-center\"\n                    >\n                      <v-icon class=\"mr-1\" color=\"#0acf97\">schedule</v-icon>\n                      {{ item.book.time }}\n                    </span>\n                    <!-- <span\n                        class=\"font-nunito font-weight-regular text-gray text-subtitle-2 d-flex align-center\"\n                      >\n                        <v-icon class=\"mr-1\" color=\"#727cf5\">mdi mdi-arrow-down-bold</v-icon>\n                        {{ getLastDeal.bargain.newPrice }} {{ info.priceUnit }}\n                      </span>\n                    </span> -->\n                  </div>\n                  <v-btn\n                    min-width=\"100%\"\n                    class=\"mb-3 py-5 text-subtitle-2\"\n                    depressed\n                    color=\"#e4e6eb\"\n                    small\n                    v-if=\"!item.book.cancel\"\n                    @click=\"showBookingCancel(item.book.bookingId, item.id)\"\n                    >Hủy lịch hẹn này</v-btn\n                  >\n                  <v-btn\n                    min-width=\"90%\"\n                    class=\"mb-3 py-5 text-subtitle-2\"\n                    depressed\n                    color=\"#e4e6eb\"\n                    small\n                    v-if=\"item.book.cancel\"\n                    >Lịch hẹn đã bị bạn hủy</v-btn\n                  >\n                </div>\n              </div>\n              <!-- inbox chat normal -->\n              <span\n                v-else\n                v-ripple\n                class=\"lighten-5 py-2 px-5 max-w-3/4 text-subtitle-2 renterChatMessage\"\n                >{{ item.message }}</span\n              >\n              <span class=\"font-nunito text-gray text-caption\">{{\n                getTimeSendMsg(item.createdAt)\n              }}</span>\n            </div>\n            <div v-if=\"item.sender === 'vendor'\" class=\"d-flex flex-column align-start\">\n              <span\n                _style=\"width: 75%\"\n                v-ripple\n                class=\"lighten-5 py-2 px-5 max-w-3/4 text-subtitle-2 vendorChatMessage\"\n                v-if=\"!item.book && !item.bargain\"\n                >{{ item.message }}</span\n              >\n              <span\n                style=\"width: 75%\"\n                v-ripple\n                class=\"lighten-5 pa-2 rounded max-w-3/4\"\n                v-if=\"item.bargain && item.bargain.dealId\"\n              >\n                Chủ trọ đồng ý với mức giá bạn đề xuất\n                <!-- <v-btn small color=\"amber\" class=\"mt-2\">Hủy thỏa thuận</v-btn> -->\n              </span>\n              <span\n                style=\"width: 75%\"\n                v-ripple\n                class=\"red lighten-5 pa-2 rounded max-w-3/4\"\n                v-if=\"item.bargain && !item.bargain.dealId\"\n                >Chủ trọ không đồng ý với mức giá bạn đề xuất.\n              </span>\n              <span class=\"font-nunito text-gray text-caption\">{{\n                getTimeSendMsg(item.createdAt)\n              }}</span>\n            </div>\n          </v-list-item-content>\n        </v-list-item>\n      </v-list>\n    </div>\n    <!-- chat -->\n    <div class=\"input\">\n      <div class=\"d-flex flex-no-wrap mt-1 mx-2\">\n        <v-text-field\n          autofocus\n          clearable\n          dense\n          outlined\n          flat\n          placeholder=\"Aa\"\n          v-model=\"inputChat.text\"\n          class=\"ma-1 text-body-2\"\n          hide-details\n          v-on:keyup.enter=\"sendMessage()\"\n        ></v-text-field>\n        <v-btn icon class=\"ma-1\" depressed @click=\"sendMessage()\">\n          <v-icon color=\"#727cf5\">send</v-icon>\n        </v-btn>\n      </div>\n      <div class=\"d-flex flex-no-wrap justify-center align-center\" style=\"height: 65px\">\n        <v-btn\n          rounded\n          depressed\n          class=\"ma-2 font-nunito btn-success\"\n          v-if=\"!hasPendingBooking && !hasBookingIncoming\"\n          @click=\"clickBooking()\"\n        >\n          <v-icon left>event_available</v-icon>Đặt lịch\n        </v-btn>\n        <v-btn\n          rounded\n          depressed\n          class=\"font-nunito btn-warning\"\n          @click=\"clickDeal()\"\n          v-if=\"!hasPendingDeal && !hasPendingBooking && !hasBookingIncoming\"\n        >\n          <v-icon left>monetization_on</v-icon>Trả giá\n        </v-btn>\n      </div>\n    </div>\n  </v-card>\n</template>\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport dateTimePickerStepper from './dateTimePickerStepper.vue';\nimport firebase from '../../config/firebase';\nimport actions from '../../config/pushNotificationActions';\n// const { sendBookingNotification } = utils;\nconst { store } = firebase;\nconst chatCollectionRef = store.collection('chat');\n\nexport default {\n  name: 'ChatBox',\n  components: { dateTimePickerStepper },\n  props: ['info', 'group'],\n  methods: {\n    ...mapActions({\n      createBooking: 'user/createBooking',\n      getDeals: 'user/getDeals',\n      getBookings: 'user/getBookings',\n      getDeal: 'user/getDeal',\n      cancelDeal: 'user/cancelDeal',\n      cancelBooking: 'user/cancelBooking',\n      sendNotification: 'user/sendNotification',\n    }),\n    myOnScroll() {},\n    clickBooking() {\n      if (this.hasIncommingBooking) {\n        this.messageTitle = 'Bạn đã có lịch hẹn xem loại phòng này!';\n        this.messageAction = 'Để đặt lịch hẹn mới, vui lòng hủy lịch hẹn trước đó';\n        this.warningDialog = true;\n      }\n      if (this.hasUnreplyBargain) {\n        this.messageTitle = 'Bạn hiện tại đang có một đề nghị trả giá chưa được chấp nhận!';\n        this.messageAction = 'Để đặt lịch, vui lòng hủy trả giá';\n        this.warningDialog = true;\n      } else {\n        this.dateTimeOverlay.show = true;\n      }\n    },\n    clickDeal() {\n      if (this.hasUnreplyBargain) {\n        this.messageTitle = 'Bạn hiện tại đang có một đề nghị trả giá chưa được chấp nhận!';\n        this.messageAction = 'Để đề xuất trả giá mới, vui lòng hủy đề xuất trả giá trước đó';\n        this.warningDialog = true;\n      } else {\n        this.bargainOverlay.show = true;\n      }\n    },\n    bargain(content) {\n      this.bargainOverlay.show = false;\n      const newContent = content;\n      newContent.bargain = {\n        originalPrice: this.info.price,\n        newPrice: this.bargainOverlay.price,\n        status: 'wait',\n        typeName: this.info.title,\n        groups: this.group,\n      };\n      this.messCollectionRef.add(newContent);\n      this.messCollectionRef.parent.update({\n        lastedMessage: newContent,\n      });\n      this.sendNotification({\n        title: `Trả giá mới từ: ${this.userState.data.username}`,\n        body: `${this.info.price}tr -> ${this.bargainOverlay.price}tr`,\n        action: actions.NEW_MESSAGE,\n        id: '',\n        icon: this.userState.data.avatar,\n        vendorId: this.id.vendorId,\n        renterId: null,\n      });\n    },\n    book(content) {\n      this.bargainOverlay.show = false;\n      const newContent = content;\n      newContent.book = {\n        date: this.dateTimeOverlay.date,\n        time: this.dateTimeOverlay.time,\n        cancel: false,\n      };\n      const renterId = this.userState.data.userId;\n      const { vendorId, typeId } = this.id;\n      const lastedDeal = this.findLastedDeal(renterId, vendorId, typeId);\n      const dateTime = this.dateTimeOverlay.date.split('/');\n      const timeTime = this.dateTimeOverlay.time.split(':');\n      const meetTime = new Date(\n        dateTime[2],\n        dateTime[1] - 1,\n        dateTime[0],\n        timeTime[0],\n        timeTime[1],\n      ).getTime();\n      const bookingToApi = {\n        renterId,\n        vendorId,\n        typeId,\n        meetTime,\n        dealId: lastedDeal ? lastedDeal.dealId : null,\n        status: 'INCOMING',\n      };\n      console.log(bookingToApi);\n      this.createBooking(bookingToApi).then(() => {\n        // sendBookingNotification(this.newlyCreatedBooking);\n        newContent.book.bookingId = this.newlyCreatedBooking.bookingId;\n        this.messCollectionRef.add(newContent);\n        this.messCollectionRef.parent.update({\n          lastedMessage: newContent,\n        });\n        this.sendNotification({\n          title: `Lịch hẹn mới từ: ${this.userState.data.username}`,\n          body: `Thời gian: ${new Date(meetTime).toLocaleString()}`,\n          action: actions.NEW_BOOKING,\n          id: newContent.book.bookingId,\n          icon: this.userState.data.avatar,\n          vendorId: this.id.vendorId,\n          renterId: null,\n        });\n      });\n    },\n    sendMessage(type = null) {\n      const content = {\n        bargain: null,\n        book: null,\n        message: this.inputChat.text,\n        createdAt: Date.now(),\n        sender: 'renter',\n      };\n      this.createDoc().then(() => {\n        if (type === null) {\n          console.log('content', content);\n          this.messCollectionRef.add(content);\n          this.docRef.update({\n            lastedMessage: content,\n          });\n          this.sendNotification({\n            title: `Tin nhắn mới từ: ${this.userState.data.username}`,\n            body: `${content.message}`,\n            action: 'NEW_MESSAGE',\n            id: '',\n            icon: this.userState.data.avatar,\n            vendorId: this.id.vendorId,\n            renterId: null,\n          });\n        } else if (type === 'book') {\n          this.book(content);\n        } else if (type === 'bargain') {\n          this.bargain(content);\n          this.bargainOverlay.step = 1;\n        }\n        this.docRef.update({\n          updated: Date.now(),\n        });\n      });\n      this.$nextTick(() => {\n        this.scrollToBottom();\n        this.inputChat.text = '';\n      });\n    },\n    async createDoc() {\n      const { userId } = this.userState.data;\n      const { vendorId, typeId, groupId } = this.id;\n      const docRef = chatCollectionRef.doc(`renter-${userId}:vendor-${vendorId}:type-${typeId}`);\n      await docRef.get().then((doc) => {\n        if (!doc.exists) {\n          doc.ref.set({\n            vendorId,\n            renterId: userId,\n            typeId,\n            groupId,\n            updated: Date.now(),\n            lastedMessage: null,\n          });\n        }\n      });\n      this.messCollectionRef = docRef.collection('messages');\n      this.docRef = docRef;\n    },\n    setMessage(messages) {\n      this.items = messages;\n    },\n    fetchMessages() {\n      // this.createDoc();\n      const { userId } = this.userState.data;\n      const { vendorId, typeId } = this.id;\n      const docRef = chatCollectionRef.doc(`renter-${userId}:vendor-${vendorId}:type-${typeId}`);\n      this.messCollectionRef = docRef.collection('messages');\n      this.messCollectionRef.orderBy('createdAt', 'asc').onSnapshot((querySnapshot) => {\n        const items = [];\n        this.dealIds = [];\n        querySnapshot.forEach((doc) => {\n          const data = doc.data();\n          items.push({ ...data, id: doc.id });\n          if (data.bargain && data.bargain.dealId) {\n            this.dealIds.push(data.bargain.dealId);\n          }\n        });\n        this.items = items;\n        this.$nextTick(() => this.scrollToBottom());\n        if (this.dealIds.length > 0) {\n          this.getDeals();\n        }\n      });\n    },\n    scrollToBottom() {\n      // eslint-disable-next-line\n      const chatbox = this.$refs.chatbox;\r\n      chatbox.scrollTop = chatbox.scrollHeight;\n    },\n    receivedDateTime(e) {\n      this.dateTimeOverlay.show = false;\n      this.dateTimeOverlay.date = e.date;\n      this.dateTimeOverlay.time = e.time;\n      this.sendMessage('book');\n    },\n    getSimpleFormatDate(date) {\n      return `${date.getDate()}/\n            ${date.getMonth() + 1}/\n            ${date.getFullYear()}`;\n    },\n    doCancelDeal(dealId) {\n      this.cancelDeal(dealId);\n    },\n    doCancelBooking() {\n      const { bookingId, docId } = this.bookingCancel.id;\n      this.cancelBooking(bookingId).then(() => {\n        this.messCollectionRef.doc(docId).update({\n          'book.cancel': true,\n        });\n        this.bookingCancel.id.bookingId = null;\n        this.bookingCancel.id.docId = null;\n        this.bookingCancel.show = false;\n        this.getBookings();\n      });\n    },\n    showBookingCancel(bookingId, docId) {\n      this.bookingCancel.show = true;\n      this.bookingCancel.id = { bookingId, docId };\n    },\n    doCancelBargain() {\n      const { docId } = this.bargainCancel.id;\n      this.messCollectionRef.doc(docId).update({\n        'bargain.status': 'cancel',\n      });\n      this.resetBargainCancel();\n    },\n    showBargainCancel(docId) {\n      this.bargainCancel.show = true;\n      this.bargainCancel.id.docId = docId;\n    },\n    resetBargainCancel() {\n      this.bargainCancel.show = false;\n      this.bargainCancel.id.docId = null;\n    },\n    getAvatarTitle() {\n      return this.group.groupName\n        .substring(this.group.groupName.lastIndexOf(' ') + 1)\n        .substring(0, 1);\n    },\n    getTimeSendMsg(createdTime) {\n      const date = new Date(createdTime).toLocaleDateString('vi-vn');\n      const time = new Date(createdTime).toLocaleTimeString('vi-vn').substr(0, 5);\n      const today = new Date().toLocaleDateString('vi-vn');\n      if (today === date) {\n        return time;\n      }\n      return `${time}, ${date}`;\n    },\n    compareBargainPrice(originalPrice, bargainPrice) {\n      return Number(originalPrice) >= Number(bargainPrice);\n    },\n  },\n  data: () => ({\n    rules: {\n      required: (value) => !!value || 'Giá không hợp lệ',\n      max(value, max) {\n        return (value || 'Giá không hợp lệ') < max || `Giá thuê nên nhỏ hơn ${max}`;\n      },\n      min(value) {\n        return (value || 'Giá không hợp lệ') > 0 || 'Giá thuê nên lớn hơn 0';\n      },\n    },\n    bookingCancel: {\n      show: false,\n      id: {\n        bookingId: null,\n        docId: null,\n      },\n    },\n    bargainCancel: {\n      show: false,\n      id: {\n        docId: null,\n      },\n    },\n    dateTimeOverlay: {\n      show: false,\n      width: 350,\n      date: '',\n      time: '',\n    },\n    bargainOverlay: {\n      show: false,\n      price: 0,\n      step: 1,\n    },\n    inputChat: {\n      text: '',\n    },\n    items: [],\n    messCollectionRef: null,\n    docRef: null,\n    dealIds: [],\n    warningDialog: false,\n    messageAction: '',\n    messageTitle: '',\n  }),\n  created() {\n    Promise.all([this.getDeals, this.getBookings]).then(() => {\n      this.fetchMessages();\n    });\n    this.bargainOverlay.price = this.info.price - 0.1;\n  },\n  mounted() {},\n  computed: {\n    isLoading() {\n      const loadingUser = this.userState.isLoading;\n      const loadingBookings = this.$store.state.user.bookings.isLoading;\n      const loadingDeals = this.$store.state.user.bookings.isLoading;\n      return loadingUser || loadingBookings || loadingDeals;\n    },\n    ...mapGetters({\n      findLastedDeal: 'user/findLastedDeal',\n      findPendingBooking: 'user/findPendingBooking',\n    }),\n    hasPendingDeal() {\n      const renterId = this.userState.data.userId;\n      const { vendorId, typeId } = this.id;\n      const res = this.findLastedDeal(renterId, vendorId, typeId);\n      if (res) {\n        return true;\n      }\n      return false;\n    },\n    hasPendingBooking() {\n      const renterId = this.userState.data.userId;\n      const { vendorId, typeId } = this.id;\n      const res = this.findPendingBooking(renterId, vendorId, typeId);\n      if (!res) {\n        return false;\n      }\n      return true;\n    },\n    hasBookingIncoming() {\n      const bookingIncoming = this.items.find((message) => message.book && !message.book.cancel);\n      return bookingIncoming !== undefined;\n    },\n    userState() {\n      return this.$store.state.user.user;\n    },\n    id() {\n      return {\n        typeId: this.info.typeId,\n        groupId: this.group.groupId,\n        renterId: this.userState.renterId,\n        vendorId: this.group.vendorId,\n      };\n    },\n    isCreatingBooking() {\n      return this.$store.state.user.bookings.isLoading;\n    },\n    newlyCreatedBooking() {\n      return this.$store.state.user.bookings.newlyCreated;\n    },\n    filteredMessage() {\n      return this.items.filter((item) => {\n        if (item.sender === 'vendor' && item.bargain) {\n          return false;\n        }\n        return true;\n      });\n    },\n    getLastDeal() {\n      let allMsg = this.filteredMessage;\n      allMsg.sort((a, b) => a.createdAt - b.createdAt);\n      allMsg = allMsg.filter(\n        (m) => m.sender === 'renter' && m.bargain && m.bargain.status === 'accept',\n      );\n      if (allMsg && allMsg.length !== 0) {\n        return allMsg[allMsg.length - 1];\n      }\n      return null;\n    },\n    hasUnreplyBargain() {\n      return this.items.some(\n        (item) => item.sender === 'renter' && item.bargain && item.bargain.status === 'wait',\n      );\n    },\n    bookings() {\n      return this.$store.state.user.bookings.data;\n    },\n    hasIncommingBooking() {\n      return (\n        this.bookings.find((b) => b.type.typeId === this.typeId && b.status === 'INCOMING') &&\n        this.bookings.find((b) => b.type.typeId === this.typeId && b.status === 'INCOMING')\n          .length !== 0\n      );\n    },\n  },\n};\n</script>\n<style scoped>\n.font-nunito {\n  font-family: 'Nunito', sans-serif !important;\n}\n.renterChatMessage {\n  background-color: #f0f2f5;\n  border-radius: 20px;\n  font-family: 'Nunito', sans-serif !important;\n}\n.renterEvent {\n  /* border: 1px solid #dee2e6 !important; */\n  border-radius: 0.25rem !important;\n  background-color: #f9f9fd !important;\n}\n/* .renterEvent {\n  border-radius: 15px;\n  color: #6c757d !important;\n  background-color: #f0f2f5;\n} */\n.vendorChatMessage {\n  background-color: #fef5e4;\n  border-radius: 20px;\n  font-family: 'Nunito', sans-serif !important;\n}\n.v-text-field--outlined >>> fieldset {\n  border-color: #727cf5 !important;\n}\n</style>\n"],"sourceRoot":"src/components/hostel_type"}]}