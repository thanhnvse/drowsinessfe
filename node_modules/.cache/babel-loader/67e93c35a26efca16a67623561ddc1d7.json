{"remainingRequest":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\thread-loader\\dist\\cjs.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js!D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\capstone\\DrowsinessFrontEnd\\src\\components\\mixins\\authentication.js","dependencies":[{"path":"D:\\capstone\\DrowsinessFrontEnd\\src\\components\\mixins\\authentication.js","mtime":1625392100053},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\capstone\\DrowsinessFrontEnd\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovY2Fwc3RvbmUvRHJvd3NpbmVzc0Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovY2Fwc3RvbmUvRHJvd3NpbmVzc0Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnLi4vLi4vY29uZmlnL2ZpcmViYXNlJzsgLy8gaW1wb3J0IHB1c2hOb3RpTWl4aW5zIGZyb20gJy4vcHVzaE5vdGlmaWNhdGlvbic7Cgp2YXIgYXV0aCA9IGZpcmViYXNlLmF1dGg7CnZhciBhdXRoZW50aWNhdGlvbk1peGlucyA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9naW5nOiBmYWxzZQogICAgfTsKICB9LAogIC8vIG1peGluczogW3B1c2hOb3RpTWl4aW5zXSwKICBjb21wdXRlZDogewogICAgdXNlckRhdGE6IGZ1bmN0aW9uIHVzZXJEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyLmRhdGE7CiAgICB9LAogICAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3MoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXIuc3VjY2VzczsKICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyh7CiAgICBsb2dpblJlcXVlc3Q6ICd1c2VyL2xvZ2luJwogIH0pKSwge30sIHsKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXV0aC5zaWduT3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJGNvb2tpZXMucmVtb3ZlKCdyb2xlJyk7CgogICAgICAgIF90aGlzLiRjb29raWVzLnJlbW92ZSgndXNlcklkJyk7CgogICAgICAgIF90aGlzLiRjb29raWVzLnJlbW92ZSgnand0Jyk7CgogICAgICAgIF90aGlzLiRjb29raWVzLnJlbW92ZSgnZmlyZWJhc2VJZFRva2VuJyk7CgogICAgICAgIF90aGlzLiRjb29raWVzLnJlbW92ZSgnbWVzc2FnaW5nVG9rZW4nKTsKCiAgICAgICAgX3RoaXMuY2xlYXJVc2VyRGF0YSgpOwoKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0VG9rZW5JZEZyb21GaXJlYmFzZTogZnVuY3Rpb24gZ2V0VG9rZW5JZEZyb21GaXJlYmFzZShqd3RUb2tlbikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjdXJyZW50VXNlciwgaWRUb2tlbiwgcmVmcmVzaFRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aC5zZXRQZXJzaXN0ZW5jZShmaXJlYmFzZS5hdXRoTmFtZXNwYWNlLkF1dGguUGVyc2lzdGVuY2UuTE9DQUwpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBhdXRoLnNpZ25JbldpdGhDdXN0b21Ub2tlbihqd3RUb2tlbik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gYXV0aC5jdXJyZW50VXNlcjsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaXJlYmFzZSB1c2VyIGRhdGE6JywgY3VycmVudFVzZXIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFVzZXIuZ2V0SWRUb2tlbih0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWRUb2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZFRva2VuKTsKICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbiA9IGN1cnJlbnRVc2VyLnJlZnJlc2hUb2tlbjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgaWRUb2tlbjogaWRUb2tlbiwKICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaXJlYmFzZSBsb2dpbiBlcnJvcjogJywgX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDE1XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZnRlckxvZ2luOiBmdW5jdGlvbiBhZnRlckxvZ2luKGtlZXBDdXJyZW50Um91dGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdG9rZW4sIHJvbGUsIGlkLCBuZXh0VXJsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5sb2dpblN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdG9rZW4gPSBfdGhpczIudXNlckRhdGEudG9rZW47CgogICAgICAgICAgICAgICAgX3RoaXMyLiRjb29raWVzLnNldCgndG9rZW4nLCB0b2tlbik7IC8vIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLmdldFRva2VuSWRGcm9tRmlyZWJhc2Uoand0VG9rZW4pOwogICAgICAgICAgICAgICAgLy8gdGhpcy4kY29va2llcy5zZXQoJ2ZpcmViYXNlSWRUb2tlbicsIGlkVG9rZW4pOwogICAgICAgICAgICAgICAgLy8gdGhpcy4kY29va2llcy5zZXQoJ2ZpcmViYXNlUmVmcmVzaFRva2VuJywgcmVmcmVzaFRva2VuKTsKCgogICAgICAgICAgICAgICAgcm9sZSA9ICdST0xFX0FETUlOJzsKICAgICAgICAgICAgICAgIGlkID0gX3RoaXMyLnVzZXJEYXRhLnVzZXJJZDsgLy8gc3dpdGNoICh0aGlzLnVzZXJEYXRhLnJvbGUpIHsKICAgICAgICAgICAgICAgIC8vICAgY2FzZSAnVkVORE9SJzoKICAgICAgICAgICAgICAgIC8vICAgICByb2xlID0gJ3ZlbmRvcnMnOwogICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrOwogICAgICAgICAgICAgICAgLy8gICBjYXNlICdSRU5URVInOgogICAgICAgICAgICAgICAgLy8gICAgIHJvbGUgPSAncmVudGVycyc7CiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAvLyAgIGNhc2UgJ0FETUlOJzoKICAgICAgICAgICAgICAgIC8vICAgICByb2xlID0gJ2FkbWluJzsKICAgICAgICAgICAgICAgIC8vICAgICBicmVhazsKICAgICAgICAgICAgICAgIC8vICAgY2FzZSAnTUFOQUdFUic6CiAgICAgICAgICAgICAgICAvLyAgICAgcm9sZSA9ICdtYW5hZ2VyJzsKICAgICAgICAgICAgICAgIC8vICAgICBicmVhazsKICAgICAgICAgICAgICAgIC8vICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIC8vICAgICBicmVhazsKICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuJGNvb2tpZXMuc2V0KCdyb2xlJywgcm9sZSk7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRjb29raWVzLnNldCgndXNlcklkJywgaWQpOwoKICAgICAgICAgICAgICAgIGlmIChrZWVwQ3VycmVudFJvdXRlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi4kcm91dGUucGFyYW1zKTsKICAgICAgICAgICAgICAgIG5leHRVcmwgPSBfdGhpczIuJHJvdXRlLnBhcmFtcy5uZXh0VXJsOwoKICAgICAgICAgICAgICAgIGlmICghbmV4dFVybCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKG5leHRVcmwpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IHJvbGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MCA9PT0gJ1JPTEVfQURNSU4nID8gMTcgOiAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnLycpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDIwKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy80MDQtZXJyb3InKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF90aGlzMi5tZXNzYWdlID0gJ0Vycm9yIHVzZXJuYW1lIG9yIHBhc3N3b3JkISc7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oa2VlcEN1cnJlbnRSb3V0ZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczMubG9naW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMubG9naW5SZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IF90aGlzMy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzMy5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgdG9rZW46IF90aGlzMy50b2tlbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuYWZ0ZXJMb2dpbihrZWVwQ3VycmVudFJvdXRlKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXMzLmxvZ2luZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9KQp9OwpleHBvcnQgZGVmYXVsdCBhdXRoZW50aWNhdGlvbk1peGluczs="},{"version":3,"sources":["D:/capstone/DrowsinessFrontEnd/src/components/mixins/authentication.js"],"names":["mapActions","firebase","auth","authenticationMixins","data","loging","computed","userData","$store","state","user","loginSuccess","success","methods","loginRequest","logout","signOut","then","$cookies","remove","clearUserData","$router","push","catch","error","console","log","getTokenIdFromFirebase","jwtToken","setPersistence","authNamespace","Auth","Persistence","LOCAL","signInWithCustomToken","currentUser","getIdToken","idToken","refreshToken","afterLogin","keepCurrentRoute","token","set","role","id","userId","$route","params","nextUrl","message","login","username","password"],"mappings":"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","sourcesContent":["import { mapActions } from 'vuex';\nimport firebase from '../../config/firebase';\n// import pushNotiMixins from './pushNotification';\n\nconst { auth } = firebase;\n\nconst authenticationMixins = {\n  data: () => ({\n    loging: false,\n  }),\n  // mixins: [pushNotiMixins],\n  computed: {\n    userData() {\n      return this.$store.state.user.user.data;\n    },\n    loginSuccess() {\n      return this.$store.state.user.user.success;\n    },\n  },\n  methods: {\n    ...mapActions({\n      loginRequest: 'user/login',\n    }),\n    logout() {\n      auth\n        .signOut()\n        .then(() => {\n          this.$cookies.remove('role');\n          this.$cookies.remove('userId');\n          this.$cookies.remove('jwt');\n          this.$cookies.remove('firebaseIdToken');\n          this.$cookies.remove('messagingToken');\n          this.clearUserData();\n          this.$router.push('/');\n        })\n        .catch((error) => console.log(error));\n    },\n    async getTokenIdFromFirebase(jwtToken) {\n      try {\n        await auth.setPersistence(firebase.authNamespace.Auth.Persistence.LOCAL);\n        await auth.signInWithCustomToken(jwtToken);\n        const { currentUser } = auth;\n        console.log('firebase user data:', currentUser);\n        const idToken = await currentUser.getIdToken(true);\n        console.log(idToken);\n        const { refreshToken } = currentUser;\n        return { idToken, refreshToken };\n      } catch (error) {\n        console.log('firebase login error: ', error);\n      }\n      return null;\n    },\n    async afterLogin(keepCurrentRoute) {\n      if (this.loginSuccess) {\n        const { token } = this.userData;\n        this.$cookies.set('token', token);\n        // const idToken = await this.getTokenIdFromFirebase(jwtToken);\n        // this.$cookies.set('firebaseIdToken', idToken);\n        // this.$cookies.set('firebaseRefreshToken', refreshToken);\n        const role = 'ROLE_ADMIN';\n        const id = this.userData.userId;\n        // switch (this.userData.role) {\n        //   case 'VENDOR':\n        //     role = 'vendors';\n        //     break;\n        //   case 'RENTER':\n        //     role = 'renters';\n        //     break;\n        //   case 'ADMIN':\n        //     role = 'admin';\n        //     break;\n        //   case 'MANAGER':\n        //     role = 'manager';\n        //     break;\n        //   default:\n        //     break;\n        // }\n        this.$cookies.set('role', role);\n        this.$cookies.set('userId', id);\n        if (!keepCurrentRoute) {\n          console.log(this.$route.params);\n          const { nextUrl } = this.$route.params;\n          if (nextUrl) {\n            this.$router.push(nextUrl);\n          } else {\n            switch (role) {\n              case 'ROLE_ADMIN':\n                this.$router.push('/');\n                break;\n              default:\n                this.$router.push('/404-error');\n            }\n          }\n        }\n        // this.doGetMessagingToken();\n      } else {\n        this.message = 'Error username or password!';\n      }\n    },\n    async login(keepCurrentRoute) {\n      this.loging = true;\n      await this.loginRequest({\n        username: this.username,\n        password: this.password,\n        token: this.token,\n      });\n      await this.afterLogin(keepCurrentRoute);\n      this.loging = false;\n    },\n  },\n};\n\nexport default authenticationMixins;\n"]}]}